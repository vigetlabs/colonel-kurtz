module.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function r(t){"use strict";this.id=l(),this.el=t.el,this.$ColonelKurtz_callbacks=u.Set(),h.subscribe(function(){return this.simulateChange()}.bind(this)),a.create(Object.assign({id:this.id},t)),o.create({editorId:this.id}),t.seed&&f(s.last().id,t.seed),setTimeout(this.simulateChange.bind(this),10)}Object.assign||(Object.assign=n(30)),n(31);var i=n(48),o=(n(7),n(19)),s=n(3),a=n(20),u=n(4),c=n(1),l=n(15),h=n(8),f=n(64);n(70),r.prototype.render=function(){"use strict";return c.render(this.$ColonelKurtz_rootComponent(),this.$ColonelKurtz_getDomElement()),this},r.prototype.simulateChange=function(){"use strict";this.$ColonelKurtz_runCallbacks()},r.prototype.addCallback=function(t){"use strict";this.$ColonelKurtz_callbacks=this.$ColonelKurtz_callbacks.add(t)},r.prototype.toJSON=function(){"use strict";var t=s.findByEditorId(this.id);return t?t.toJSON():{}},r.prototype.toHtml=function(){"use strict";return c.renderToStaticMarkup(this.$ColonelKurtz_rootComponent())},r.prototype.$ColonelKurtz_rootComponent=function(){"use strict";return c.createElement(i,{editorId:this.id})},r.prototype.$ColonelKurtz_getDomElement=function(){"use strict";return this.el},r.prototype.$ColonelKurtz_runCallbacks=function(){"use strict";var t=this.toJSON();this.$ColonelKurtz_callbacks.forEach(function(e){e(t)})},r.addons=n(46),r.createBlock=n(29),r.addBlockType=n(63),t.exports=r},function(t){t.exports=require("react")},function(t,e,n){var r=n(32).Dispatcher;t.exports=new r},function(t,e,n){var r=n(13),i=n(61),o=n(14),s=n(8),a=n(24),u=n(2),c=n(4),l=c.List(),h={all:function(){return l},last:function(){return l.last()},findByKey:function(t,e){return this.all().find(function(n){return n[t]===e})||null},findByEditorId:function(t){return h.findByKey("editorId",t)},findByBlockId:function(t){return h.findByKey("blockId",t)},find:function(t){return h.findByKey("id",t)},_create:function(t){var e=new i({editorId:t.editorId,blockId:t.blockId});l=l.push(e)},_createFromParent:function(t){var e=this.find(t.parentBlockListId);if(e){var n=new i({editorId:e.editorId,blockId:t.id});l=l.push(n)}},_addBlockToList:function(t,e){var n=this.find(t.parentBlockListId);n&&(n.insertBlock(t.id,e),s.publish())},_removeBlockFromList:function(t,e){var n=this.find(e);n&&(n.removeBlock(t),s.publish())},_move:function(t,e,n){var r=this.find(t);r&&(r.move(e,n),s.publish())},dispatchToken:u.register(function(t){switch(t.type){case r.BLOCK_CREATE:u.waitFor([o.dispatchToken]),h._addBlockToList(t.block,t.position),h._createFromParent(t.block,t.position);break;case r.BLOCK_DESTROY:u.waitFor([o.dispatchToken]),h._removeBlockFromList(t.blockId,t.parentBlockListId);break;case a.BLOCK_LIST_CREATE:h._create(t.params);break;case a.BLOCK_LIST_MOVE:h._move(t.blockListId,t.fromId,t.toId)}})};t.exports=h},function(t){function e(){function t(t,e,n,r){var i;if(r){var o=r.prototype;i=wn.create(o)}else i=t.prototype;return wn.keys(e).forEach(function(t){i[t]=e[t]}),wn.keys(n).forEach(function(e){t[e]=n[e]}),i.constructor=t,t.prototype=i,t}function e(t,e,n,r){return wn.getPrototypeOf(e)[n].apply(t,r)}function n(t,n,r){e(t,n,"constructor",r)}function r(t,e){return t===e||t!==t&&e!==e?!0:t&&e?("function"==typeof t.valueOf&&"function"==typeof e.valueOf&&(t=t.valueOf(),e=e.valueOf()),"function"==typeof t.equals&&"function"==typeof e.equals?t.equals(e):t===e||t!==t&&e!==e):!1}function i(t,e){if(!t)throw new Error(e)}function o(t){return t.value=!1,t}function s(t){t&&(t.value=!0)}function a(){}function u(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;n>i;i++)r[i]=t[i+e];return r}function c(t){i(1/0!==t,"Cannot perform this action with an infinite size.")}function l(t){return void 0===t.size&&(t.size=t.__iterate(f)),t.size}function h(t,e){return e>=0?+e:l(t)+ +e}function f(){return!0}function d(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function p(t,e){return v(t,e,0)}function m(t,e){return v(t,e,e)}function v(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function _(t){return t>>>1&1073741824|3221225471&t}function g(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){for(var n=0|t;t>4294967295;)t/=4294967295,n^=t;return _(n)}return"string"===e?t.length>Nn?b(t):y(t):"function"==typeof t.hashCode?t.hashCode():w(t)}function b(t){var e=Mn[t];return void 0===e&&(e=y(t),qn===Pn&&(qn=0,Mn={}),qn++,Mn[t]=e),e}function y(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return _(e)}function w(t){var e=On&&On.get(t);if(e)return e;if(e=t[zn])return e;if(!Ln){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[zn])return e;if(e=k(t))return e}if(Object.isExtensible&&!Object.isExtensible(t))throw new Error("Non-extensible objects are not allowed as keys.");if(e=++Bn,1073741824&Bn&&(Bn=0),On)On.set(t,e);else if(Ln)Object.defineProperty(t,zn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[zn]=e;else{if(!t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[zn]=e}return e}function k(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function C(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function E(){return{value:void 0,done:!0}}function S(t){return!!x(t)}function I(t){return t&&"function"==typeof t.next}function D(t){var e=x(t);return e&&e.call(t)}function x(t){var e=t&&(Hn&&t[Hn]||t[Wn]);return"function"==typeof e?e:void 0}function T(t){return!(!t||!t[Yn])}function A(t){return!(!t||!t[Gn])}function L(t){return!(!t||!t[Qn])}function O(t){return A(t)||L(t)}function B(t){return!(!t||!t[Xn])}function z(t,e){return e}function N(t,e){return[e,t]}function P(t){return function(){return!t.apply(this,arguments)}}function q(t){return function(){return-t.apply(this,arguments)}}function M(t){return"string"==typeof t?JSON.stringify(t):t}function R(t,e){return t>e?-1:e>t?1:0}function j(t,e){if(t===e)return!0;if(!T(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||A(t)!==A(e)||L(t)!==L(e)||B(t)!==B(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!O(t);if(B(t)){var i=t.entries();return e.every(function(t,e){var o=i.next().value;return o&&r(o[1],t)&&(n||r(o[0],e))})&&i.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)t.cacheResult();else{o=!0;var s=t;t=e,e=s}var a=!0,u=e.__iterate(function(e,i){return(n?t.has(e):o?r(e,t.get(i,Dn)):r(t.get(i,Dn),e))?void 0:(a=!1,!1)});return a&&t.size===u}function K(t){if(1/0===t.size)return 0;var e=B(t),n=A(t),r=e?1:0,i=t.__iterate(n?e?function(t,e){r=31*r+H(g(t),g(e))|0}:function(t,e){r=r+H(g(t),g(e))|0}:e?function(t){r=31*r+g(t)|0}:function(t){r=r+g(t)|0});return W(i,r)}function W(t,e){return e=An(e,3432918353),e=An(e<<15|e>>>-15,461845907),e=An(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=An(e^e>>>16,2246822507),e=An(e^e>>>13,3266489909),e=_(e^e>>>16)}function H(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function $(t,e){var n=t.prototype,r=function(t){n[t]=e[t]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function F(t){return!(!t||!t[fr])}function U(){return _r||(_r=new dr([]))}function J(t){var e=Array.isArray(t)?new dr(t).fromEntrySeq():I(t)?new vr(t).fromEntrySeq():S(t)?new mr(t).fromEntrySeq():"object"==typeof t?new pr(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function V(t){var e=G(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function Y(t){var e=G(t)||"object"==typeof t&&new pr(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function G(t){return Q(t)?new dr(t):I(t)?new vr(t):S(t)?new mr(t):void 0}function Q(t){return t&&"number"==typeof t.length}function X(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;o>=s;s++){var a=i[n?o-s:s];if(e(a[1],r?a[0]:s,t)===!1)return s+1}return s}return t.__iterateUncached(e,n)}function Z(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new Fn(function(){var t=i[n?o-s:s];return s++>o?E():C(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function te(t,e){return e?ee(e,t,"",{"":t}):ne(t)}function ee(t,e,n,r){return Array.isArray(e)?t.call(r,n,ur(e).map(function(n,r){return ee(t,n,r,e)})):re(e)?t.call(r,n,sr(e).map(function(n,r){return ee(t,n,r,e)})):e}function ne(t){return Array.isArray(t)?ur(t).map(ne).toList():re(t)?sr(t).map(ne).toMap():t}function re(t){return t&&t.constructor===Object}function ie(t){return!(!t||!t[Ir])}function oe(t,e){return C(t,e[0],e[1])}function se(t,e){return{node:t,index:0,__prev:e}}function ae(t,e,n,r){var i=Object.create(Dr);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function ue(){return Rr||(Rr=ae(0))}function ce(t,e,n){var r,i;if(t._root){var s=o(xn),a=o(Tn);if(r=le(t._root,t.__ownerID,0,void 0,e,n,s,a),!a.value)return t;i=t.size+(s.value?n===Dn?-1:1:0)}else{if(n===Dn)return t;i=1,r=new xr(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?ae(i,r):ue()}function le(t,e,n,r,i,o,a,u){return t?t.update(e,n,r,i,o,a,u):o===Dn?t:(s(u),s(a),new Pr(e,r,[i,o]))}function he(t){return t.constructor===Pr||t.constructor===zr}function fe(t,e,n,r,i){if(t.keyHash===r)return new zr(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&In,a=(0===n?r:r>>>n)&In,u=s===a?[fe(t,e,n+En,r,i)]:(o=new Pr(e,r,i),a>s?[t,o]:[o,t]);return new Ar(e,1<<s|1<<a,u)}function de(t,e,n,r){t||(t=new a);for(var i=new Pr(t,g(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}function pe(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,u=1,c=e.length;c>a;a++,u<<=1){var l=e[a];void 0!==l&&a!==r&&(i|=u,s[o++]=l)}return new Ar(t,i,s)}function me(t,e,n,r,i){for(var o=0,s=new Array(Sn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new Or(t,o+1,s)}function ve(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=tr(o);T(o)||(s=s.map(function(t){return te(t)})),r.push(s)}return ge(t,e,r)}function _e(t){return function(e,n){return e&&e.mergeDeepWith&&T(n)?e.mergeDeepWith(t,n):t?t(e,n):n}}function ge(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0===t.size&&1===n.length?t.constructor(n[0]):t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,Dn,function(t){return t===Dn?n:e(t,n)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)})}function be(t,e,n,r){var o=t===Dn,s=e.next();if(s.done){var a=o?n:t,u=r(a);return u===a?t:u}i(o||t&&t.set,"invalid keyPath");var c=s.value,l=o?Dn:t.get(c,Dn),h=be(l,e,n,r);return h===l?t:h===Dn?t.remove(c):(o?ue():t).set(c,h)}function ye(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function we(t,e,n,r){var i=r?t:u(t);return i[e]=n,i}function ke(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;i>a;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}function Ce(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;r>s;s++)s===e&&(o=1),i[s]=t[s+o];return i}function Ee(t){var e=$e(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.contains(e)},e.contains=function(e){return t.has(e)},e.cacheResult=Fe,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===Kn){var r=t.__iterator(e,n);return new Fn(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===jn?Rn:jn,n)},e}function Se(t,e,n){var r=$e(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,Dn);return o===Dn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return r(e.call(n,t,i,s),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(Kn,i);return new Fn(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return C(r,a,e.call(n,s[1],a,t),i)})},r}function Ie(t,e){var n=$e(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Ee(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.contains=function(e){return t.contains(e)},n.cacheResult=Fe,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function De(t,e,n,r){var i=$e(t);return r&&(i.has=function(r){var i=t.get(r,Dn);return i!==Dn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,Dn);return o!==Dn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)?(a++,i(t,r?o:a-1,s)):void 0},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(Kn,o),a=0;return new Fn(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return C(i,r?c:a++,l,o)}})},i}function xe(t,e,n){var r=Sr().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function Te(t,e,n){var r=A(t),i=Sr().asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return t=t||[],t.push(r?[s,o]:o),t})});var o=He(t);return i.map(function(e){return je(t,o(e))})}function Ae(t,e){if(e>t.size)return t;0>e&&(e=0);var n=$e(t);return n.size=t.size&&Math.min(t.size,e),n.__iterateUncached=function(n,r){var i=this;if(0===e)return 0;if(r)return this.cacheResult().__iterate(n,r);var o=0;return t.__iterate(function(t,r){return++o&&n(t,r,i)!==!1&&e>o}),o},n.__iteratorUncached=function(n,r){if(r)return this.cacheResult().__iterator(n,r);var i=e&&t.__iterator(n,r),o=0;return new Fn(function(){return o++>e?E():i.next()})},n}function Le(t,e,n){var r=$e(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(Kn,i),a=!0;return new Fn(function(){if(!a)return E();var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===Kn?t:C(r,u,c,t):(a=!1,E())})},r}function Oe(t,e,n){if(0>=e)return t;var r=$e(t);return r.size=t.size&&Math.max(0,t.size-e),r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0,a=!0,u=0;return t.__iterate(function(t,i){return a&&(a=s++<e)?void 0:(u++,r(t,n?i:u-1,o))}),u},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=e&&t.__iterator(r,i),s=0,a=0;return new Fn(function(){for(;e>s;)s++,o.next();var t=o.next();return n||r===jn?t:r===Rn?C(r,a++,void 0,t):C(r,a++,t.value[1],t)})},r}function Be(t,e,n,r){var i=$e(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){return a&&(a=e.call(n,t,o,c))?void 0:(u++,i(t,r?o:u-1,s))}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(Kn,o),u=!0,c=0;return new Fn(function(){var t,o,l;do{if(t=a.next(),t.done)return r||i===jn?t:i===Rn?C(i,c++,void 0,t):C(i,c++,t.value[1],t);var h=t.value;o=h[0],l=h[1],u&&(u=e.call(n,l,o,s))}while(u);return i===Kn?t:C(i,o,l,t)})},i}function ze(t,e){var n=A(t),r=[t].concat(e).map(function(t){return T(t)?n&&(t=tr(t)):t=n?J(t):V(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&A(i)||L(t)&&L(i))return i}var o=new dr(r);return n?o=o.toKeyedSeq():L(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function Ne(t,e,n){var r=$e(t);return r.__iterateUncached=function(r,i){function o(t,u){var c=this;t.__iterate(function(t,i){return(!e||e>u)&&T(t)?o(t,u+1):r(t,n?i:s++,c)===!1&&(a=!0),!a},i)}var s=0,a=!1;return o(t,0),s},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),s=[],a=0;return new Fn(function(){for(;o;){var t=o.next();if(t.done===!1){var u=t.value;if(r===Kn&&(u=u[1]),e&&!(s.length<e)||!T(u))return n?t:C(r,a++,u,t);s.push(o),o=u.__iterator(r,i)}else o=s.pop()}return E()})},r}function Pe(t,e,n){var r=He(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function qe(t,e){var n=$e(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(jn,r),s=0;return new Fn(function(){return(!i||s%2)&&(i=o.next(),i.done)?i:s%2?C(n,s++,e):C(n,s++,i.value,i)})},n}function Me(t,e,n){e||(e=Ue);var r=A(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?sr(o):L(t)?ur(o):lr(o)}function Re(t,e,n){if(e||(e=Ue),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return e(n[1],t[1])>0?n:t});return r&&r[0]}return t.reduce(function(t,n){return e(n,t)>0?n:t})}function je(t,e){return F(t)?e:t.constructor(e)}function Ke(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function We(t){return c(t.size),l(t)}function He(t){return A(t)?tr:L(t)?nr:rr}function $e(t){return Object.create((A(t)?sr:L(t)?ur:lr).prototype)}function Fe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):ir.prototype.cacheResult.call(this)}function Ue(t,e){return t>e?1:e>t?-1:0}function Je(t){return!(!t||!t[Vr])}function Ve(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===a?u&&u.array:t&&t.array,i=n>o?0:o-n,c=s-n;return c>Sn&&(c=Sn),function(){if(i===c)return Zr;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var a,u=t&&t.array,c=i>o?0:o-i>>r,l=(s-i>>r)+1;return l>Sn&&(l=Sn),function(){for(;;){if(a){var t=a();if(t!==Zr)return t;a=null}if(c===l)return Zr;var o=e?--l:c++;a=n(u&&u[o],r-En,i+(o<<r))}}}var o=t._origin,s=t._capacity,a=rn(s),u=t._tail;return n(t._root,t._level,0)}function Ye(t,e,n,r,i,o,s){var a=Object.create(Yr);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function Ge(){return Xr||(Xr=Ye(0,0,En))}function Qe(t,e,n){if(e=h(t,e),e>=t.size||0>e)return t.withMutations(function(t){0>e?en(t,e).set(0,n):en(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,s=o(Tn);return e>=rn(t._capacity)?r=Xe(r,t.__ownerID,0,e,n,s):i=Xe(i,t.__ownerID,t._level,e,n,s),s.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ye(t._origin,t._capacity,t._level,i,r):t}function Xe(t,e,n,r,i,o){var a=r>>>n&In,u=t&&a<t.array.length;if(!u&&void 0===i)return t;var c;if(n>0){var l=t&&t.array[a],h=Xe(l,e,n-En,r,i,o);return h===l?t:(c=Ze(t,e),c.array[a]=h,c)}return u&&t.array[a]===i?t:(s(o),c=Ze(t,e),void 0===i&&a===c.array.length-1?c.array.pop():c.array[a]=i,c)}function Ze(t,e){return e&&t&&e===t.ownerID?t:new Gr(t?t.array.slice():[],e)}function tn(t,e){if(e>=rn(t._capacity))return t._tail;if(e<1<<t._level+En){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&In],r-=En;return n}}function en(t,e,n){var r=t.__ownerID||new a,i=t._origin,o=t._capacity,s=i+e,u=void 0===n?o:0>n?o+n:i+n;if(s===i&&u===o)return t;if(s>=u)return t.clear();for(var c=t._level,l=t._root,h=0;0>s+h;)l=new Gr(l&&l.array.length?[void 0,l]:[],r),c+=En,h+=1<<c;h&&(s+=h,i+=h,u+=h,o+=h);for(var f=rn(o),d=rn(u);d>=1<<c+En;)l=new Gr(l&&l.array.length?[l]:[],r),c+=En;var p=t._tail,m=f>d?tn(t,u-1):d>f?new Gr([],r):p;if(p&&d>f&&o>s&&p.array.length){l=Ze(l,r);for(var v=l,_=c;_>En;_-=En){var g=f>>>_&In;v=v.array[g]=Ze(v.array[g],r)}v.array[f>>>En&In]=p}if(o>u&&(m=m&&m.removeAfter(r,0,u)),s>=d)s-=d,u-=d,c=En,l=null,m=m&&m.removeBefore(r,0,s);else if(s>i||f>d){for(h=0;l;){var b=s>>>c&In;if(b!==d>>>c&In)break;b&&(h+=(1<<c)*b),c-=En,l=l.array[b]}l&&s>i&&(l=l.removeBefore(r,c,s-h)),l&&f>d&&(l=l.removeAfter(r,c,d-h)),h&&(s-=h,u-=h)}return t.__ownerID?(t.size=u-s,t._origin=s,t._capacity=u,t._level=c,t._root=l,t._tail=m,t.__hash=void 0,t.__altered=!0,t):Ye(s,u,c,l,m)}function nn(t,e,n){for(var r=[],i=0,o=0;o<n.length;o++){var s=n[o],a=nr(s);a.size>i&&(i=a.size),T(s)||(a=a.map(function(t){return te(t)})),r.push(a)}return i>t.size&&(t=t.setSize(i)),ge(t,e,r)}function rn(t){return Sn>t?0:t-1>>>En<<En}function on(t){return ie(t)&&B(t)}function sn(t,e,n,r){var i=Object.create(ti.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function an(){return ei||(ei=sn(ue(),Ge()))}function un(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===Dn){if(!u)return t;s.size>=Sn&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):sn(r,i)}function cn(t){return!(!t||!t[ii])}function ln(t,e,n,r){var i=Object.create(oi);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function hn(){return si||(si=ln(0))}function fn(t){return!(!t||!t[ui])}function dn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function pn(t,e){var n=Object.create(ci);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function mn(){return li||(li=pn(ue()))}function vn(t){return fn(t)&&B(t)}function _n(t,e){var n=Object.create(fi);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function gn(){return di||(di=_n(an()))}function bn(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function yn(t){return t._name||t.constructor.name}var wn=Object,kn={};kn.createClass=t,kn.superCall=e,kn.defaultSuperCall=n;var Cn="delete",En=5,Sn=1<<En,In=Sn-1,Dn={},xn={value:!1},Tn={value:!1},An="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},Ln=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}(),On="function"==typeof WeakMap&&new WeakMap,Bn=0,zn="__immutablehash__";"function"==typeof Symbol&&(zn=Symbol(zn));var Nn=16,Pn=255,qn=0,Mn={},Rn=0,jn=1,Kn=2,Wn="@@iterator",Hn="function"==typeof Symbol&&Symbol.iterator,$n=Hn||Wn,Fn=function(t){this.next=t};kn.createClass(Fn,{toString:function(){return"[Iterator]"}},{}),Fn.KEYS=Rn,Fn.VALUES=jn,Fn.ENTRIES=Kn;var Un=Fn.prototype;Un.inspect=Un.toSource=function(){return this.toString()},Un[$n]=function(){return this};var Jn=function(t){return T(t)?t:ir(t)},Vn=Jn;kn.createClass(Jn,{toArray:function(){c(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new $r(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toKeyedSeq:function(){return new Hr(this,!0)},toMap:function(){return Sr(this.toKeyedSeq())},toObject:function(){c(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return ti(this.toKeyedSeq())},toOrderedSet:function(){return hi(A(this)?this.valueSeq():this)},toSet:function(){return ai(A(this)?this.valueSeq():this)},toSetSeq:function(){return new Fr(this)},toSeq:function(){return L(this)?this.toIndexedSeq():A(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ni(A(this)?this.valueSeq():this)},toList:function(){return Jr(A(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return je(this,ze(this,t))},contains:function(t){return this.some(function(e){return r(e,t)})},entries:function(){return this.__iterator(Kn)},every:function(t,e){c(this.size);var n=!0;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?void 0:(n=!1,!1)}),n},filter:function(t,e){return je(this,De(this,t,e,!0))},find:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){return t.call(e,n,i,o)?(r=n,!1):void 0}),r},forEach:function(t,e){return c(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){c(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r:""}),e},keys:function(){return this.__iterator(Rn)},map:function(t,e){return je(this,Se(this,t,e))},reduce:function(t,e,n){c(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(){var t=this.toKeyedSeq().reverse();return t.reduce.apply(t,arguments)},reverse:function(){return je(this,Ie(this,!0))},slice:function(t,e){if(d(t,e,this.size))return this;var n=p(t,this.size),r=m(e,this.size);if(n!==n||r!==r)return this.toSeq().cacheResult().slice(t,e);var i=0===n?this:this.skip(n);return je(this,void 0===r||r===this.size?i:i.take(r-n))},some:function(t,e){return!this.every(P(t),e)},sort:function(t){return je(this,Me(this,t))},values:function(){return this.__iterator(jn)},butLast:function(){return this.slice(0,-1)},count:function(t,e){return l(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return xe(this,t,e)},equals:function(t){return j(this,t)},entrySeq:function(){var t=this;if(t._cache)return new dr(t._cache);var e=t.toSeq().map(N).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(P(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(f)},flatMap:function(t,e){return je(this,Pe(this,t,e))},flatten:function(t){return je(this,Ne(this,t,!0))},fromEntrySeq:function(){return new Ur(this)},get:function(t,e){return this.find(function(e,n){return r(n,t)},void 0,e)},getIn:function(t,e){var n=this;if(t)for(var r,i=D(t)||D(Vn(t));!(r=i.next()).done;){var o=r.value;if(n=n&&n.get?n.get(o,Dn):Dn,n===Dn)return e}return n},groupBy:function(t,e){return Te(this,t,e)},has:function(t){return this.get(t,Dn)!==Dn},hasIn:function(t){return this.getIn(t,Dn)!==Dn},isSubset:function(t){return t="function"==typeof t.contains?t:Vn(t),this.every(function(e){return t.contains(e)})},isSuperset:function(t){return t.isSubset(this)},keySeq:function(){return this.toSeq().map(z).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return Re(this,t)},maxBy:function(t,e){return Re(this,e,t)},min:function(t){return Re(this,t?q(t):R)},minBy:function(t,e){return Re(this,e?q(e):R,t)},rest:function(){return this.slice(1)},skip:function(t){return je(this,Oe(this,t,!0))},skipLast:function(t){return je(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return je(this,Be(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(P(t),e)},sortBy:function(t,e){return je(this,Me(this,e,t))},take:function(t){return je(this,Ae(this,t))},takeLast:function(t){return je(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return je(this,Le(this,t,e))},takeUntil:function(t,e){return this.takeWhile(P(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=K(this))}},{});var Yn="@@__IMMUTABLE_ITERABLE__@@",Gn="@@__IMMUTABLE_KEYED__@@",Qn="@@__IMMUTABLE_INDEXED__@@",Xn="@@__IMMUTABLE_ORDERED__@@",Zn=Jn.prototype;Zn[Yn]=!0,Zn[$n]=Zn.values,Zn.toJSON=Zn.toJS,Zn.__toJS=Zn.toArray,Zn.__toStringMapper=M,Zn.inspect=Zn.toSource=function(){return this.toString()},Zn.chain=Zn.flatMap,function(){try{Object.defineProperty(Zn,"length",{get:function(){if(!Jn.noLengthWarning){var t;try{throw new Error}catch(e){t=e.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}();var tr=function(t){return A(t)?t:sr(t)};kn.createClass(tr,{flip:function(){return je(this,Ee(this))},findKey:function(t,e){var n;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?(n=i,!1):void 0}),n},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return r(e,t)})},lastKeyOf:function(t){return this.toSeq().reverse().keyOf(t)},mapEntries:function(t,e){var n=this,r=0;return je(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return je(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}},{},Jn);var er=tr.prototype;er[Gn]=!0,er[$n]=Zn.entries,er.__toJS=Zn.toObject,er.__toStringMapper=function(t,e){return e+": "+M(t)};var nr=function(t){return L(t)?t:ur(t)};kn.createClass(nr,{toKeyedSeq:function(){return new Hr(this,!1)},filter:function(t,e){return je(this,De(this,t,e,!1))},findIndex:function(t,e){var n=this.toKeyedSeq().findKey(t,e);return void 0===n?-1:n},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.toKeyedSeq().lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return je(this,Ie(this,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=p(t,this.size);var r=this.slice(0,t);return je(this,1===n?r:r.concat(u(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return je(this,Ne(this,t,!1))},get:function(t,e){return t=h(this,t),0>t||1/0===this.size||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=h(this,t),t>=0&&(void 0!==this.size?1/0===this.size||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return je(this,qe(this,t))},last:function(){return this.get(-1)},skip:function(t){var e=this,n=Oe(e,t,!1);return F(e)&&n!==e&&(n.get=function(n,r){return n=h(this,n),n>=0?e.get(n+t,r):r}),je(this,n)},skipWhile:function(t,e){return je(this,Be(this,t,e,!1))},take:function(t){var e=this,n=Ae(e,t);return F(e)&&n!==e&&(n.get=function(n,r){return n=h(this,n),n>=0&&t>n?e.get(n,r):r}),je(this,n)}},{},Jn),nr.prototype[Qn]=!0,nr.prototype[Xn]=!0;var rr=function(t){return T(t)&&!O(t)?t:lr(t)};kn.createClass(rr,{get:function(t,e){return this.has(t)?t:e},contains:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}},{},Jn),rr.prototype.has=Zn.contains,Jn.isIterable=T,Jn.isKeyed=A,Jn.isIndexed=L,Jn.isAssociative=O,Jn.isOrdered=B,Jn.Keyed=tr,Jn.Indexed=nr,Jn.Set=rr,Jn.Iterator=Fn;var ir=function(t){return null===t||void 0===t?U():T(t)?t.toSeq():Y(t)},or=ir;kn.createClass(ir,{toSeq:function(){return this
},toString:function(){return this.__toString("Seq {","}")},cacheResult:function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},__iterate:function(t,e){return X(this,t,e,!0)},__iterator:function(t,e){return Z(this,t,e,!0)}},{of:function(){return or(arguments)}},Jn);var sr=function(t){return null===t||void 0===t?U().toKeyedSeq():T(t)?A(t)?t.toSeq():t.fromEntrySeq():J(t)},ar=sr;kn.createClass(sr,{toKeyedSeq:function(){return this},toSeq:function(){return this}},{of:function(){return ar(arguments)}},ir),$(sr,tr.prototype);var ur=function(t){return null===t||void 0===t?U():T(t)?A(t)?t.entrySeq():t.toIndexedSeq():V(t)},cr=ur;kn.createClass(ur,{toIndexedSeq:function(){return this},toString:function(){return this.__toString("Seq [","]")},__iterate:function(t,e){return X(this,t,e,!1)},__iterator:function(t,e){return Z(this,t,e,!1)}},{of:function(){return cr(arguments)}},ir),$(ur,nr.prototype);var lr=function(t){return(null===t||void 0===t?U():T(t)?A(t)?t.entrySeq():t:V(t)).toSetSeq()},hr=lr;kn.createClass(lr,{toSetSeq:function(){return this}},{of:function(){return hr(arguments)}},ir),$(lr,rr.prototype),ir.isSeq=F,ir.Keyed=sr,ir.Set=lr,ir.Indexed=ur;var fr="@@__IMMUTABLE_SEQ__@@";ir.prototype[fr]=!0;var dr=function(t){this._array=t,this.size=t.length};kn.createClass(dr,{get:function(t,e){return this.has(t)?this._array[h(this,t)]:e},__iterate:function(t,e){for(var n=this._array,r=n.length-1,i=0;r>=i;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},__iterator:function(t,e){var n=this._array,r=n.length-1,i=0;return new Fn(function(){return i>r?E():C(t,i,n[e?r-i++:i++])})}},{},ur);var pr=function(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length};kn.createClass(pr,{get:function(t,e){return void 0===e||this.has(t)?this._object[t]:e},has:function(t){return this._object.hasOwnProperty(t)},__iterate:function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;i>=o;o++){var s=r[e?i-o:o];if(t(n[s],s,this)===!1)return o+1}return o},__iterator:function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new Fn(function(){var s=r[e?i-o:o];return o++>i?E():C(t,s,n[s])})}},{},sr),pr.prototype[Xn]=!0;var mr=function(t){this._iterable=t,this.size=t.length||t.size};kn.createClass(mr,{__iterateUncached:function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=D(n),i=0;if(I(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},__iteratorUncached:function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=D(n);if(!I(r))return new Fn(E);var i=0;return new Fn(function(){var e=r.next();return e.done?e:C(t,i++,e.value)})}},{},ur);var vr=function(t){this._iterator=t,this._iteratorCache=[]};kn.createClass(vr,{__iterateUncached:function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var s=o.value;if(r[i]=s,t(s,i++,this)===!1)break}return i},__iteratorUncached:function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new Fn(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return C(t,i,r[i++])})}},{},ur);var _r,gr=function(){throw TypeError("Abstract")};kn.createClass(gr,{},{},Jn);var br=function(){kn.defaultSuperCall(this,yr.prototype,arguments)},yr=br;kn.createClass(br,{},{},gr),$(br,tr.prototype);var wr=function(){kn.defaultSuperCall(this,kr.prototype,arguments)},kr=wr;kn.createClass(wr,{},{},gr),$(wr,nr.prototype);var Cr=function(){kn.defaultSuperCall(this,Er.prototype,arguments)},Er=Cr;kn.createClass(Cr,{},{},gr),$(Cr,rr.prototype),gr.Keyed=br,gr.Indexed=wr,gr.Set=Cr;var Sr=function(t){return null===t||void 0===t?ue():ie(t)?t:ue().withMutations(function(e){var n=tr(t);c(n.size),n.forEach(function(t,n){return e.set(n,t)})})};kn.createClass(Sr,{toString:function(){return this.__toString("Map {","}")},get:function(t,e){return this._root?this._root.get(0,void 0,t,e):e},set:function(t,e){return ce(this,t,e)},setIn:function(t,e){return this.updateIn(t,Dn,function(){return e})},remove:function(t){return ce(this,t,Dn)},removeIn:function(t){return this.updateIn(t,function(){return Dn})},update:function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},updateIn:function(t,e,n){n||(n=e,e=void 0);var r=be(this,D(t)||D(Jn(t)),e,n);return r===Dn?void 0:r},clear:function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ue()},merge:function(){return ve(this,void 0,arguments)},mergeWith:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return ve(this,t,e)},mergeIn:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.updateIn(t,ue(),function(t){return t.merge.apply(t,e)})},mergeDeep:function(){return ve(this,_e(void 0),arguments)},mergeDeepWith:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return ve(this,_e(t),e)},mergeDeepIn:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.updateIn(t,ue(),function(t){return t.mergeDeep.apply(t,e)})},sort:function(t){return ti(Me(this,t))},sortBy:function(t,e){return ti(Me(this,e,t))},withMutations:function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},asMutable:function(){return this.__ownerID?this:this.__ensureOwner(new a)},asImmutable:function(){return this.__ensureOwner()},wasAltered:function(){return this.__altered},__iterator:function(t,e){return new Mr(this,t,e)},__iterate:function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},__ensureOwner:function(t){return t===this.__ownerID?this:t?ae(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)}},{},br),Sr.isMap=ie;var Ir="@@__IMMUTABLE_MAP__@@",Dr=Sr.prototype;Dr[Ir]=!0,Dr[Cn]=Dr.remove;var xr=function(t,e){this.ownerID=t,this.entries=e},Tr=xr;kn.createClass(xr,{get:function(t,e,n,i){for(var o=this.entries,s=0,a=o.length;a>s;s++)if(r(n,o[s][0]))return o[s][1];return i},update:function(t,e,n,i,o,a,c){for(var l=o===Dn,h=this.entries,f=0,d=h.length;d>f&&!r(i,h[f][0]);f++);var p=d>f;if(p?h[f][1]===o:l)return this;if(s(c),(l||!p)&&s(a),!l||1!==h.length){if(!p&&!l&&h.length>=jr)return de(t,h,i,o);var m=t&&t===this.ownerID,v=m?h:u(h);return p?l?f===d-1?v.pop():v[f]=v.pop():v[f]=[i,o]:v.push([i,o]),m?(this.entries=v,this):new Tr(t,v)}}},{});var Ar=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n},Lr=Ar;kn.createClass(Ar,{get:function(t,e,n,r){void 0===e&&(e=g(n));var i=1<<((0===t?e:e>>>t)&In),o=this.bitmap;return 0===(o&i)?r:this.nodes[ye(o&i-1)].get(t+En,e,n,r)},update:function(t,e,n,r,i,o,s){void 0===n&&(n=g(r));var a=(0===e?n:n>>>e)&In,u=1<<a,c=this.bitmap,l=0!==(c&u);if(!l&&i===Dn)return this;var h=ye(c&u-1),f=this.nodes,d=l?f[h]:void 0,p=le(d,t,e+En,n,r,i,o,s);if(p===d)return this;if(!l&&p&&f.length>=Kr)return me(t,f,c,a,p);if(l&&!p&&2===f.length&&he(f[1^h]))return f[1^h];if(l&&p&&1===f.length&&he(p))return p;var m=t&&t===this.ownerID,v=l?p?c:c^u:c|u,_=l?p?we(f,h,p,m):Ce(f,h,m):ke(f,h,p,m);return m?(this.bitmap=v,this.nodes=_,this):new Lr(t,v,_)}},{});var Or=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n},Br=Or;kn.createClass(Or,{get:function(t,e,n,r){void 0===e&&(e=g(n));var i=(0===t?e:e>>>t)&In,o=this.nodes[i];return o?o.get(t+En,e,n,r):r},update:function(t,e,n,r,i,o,s){void 0===n&&(n=g(r));var a=(0===e?n:n>>>e)&In,u=i===Dn,c=this.nodes,l=c[a];if(u&&!l)return this;var h=le(l,t,e+En,n,r,i,o,s);if(h===l)return this;var f=this.count;if(l){if(!h&&(f--,Wr>f))return pe(t,c,f,a)}else f++;var d=t&&t===this.ownerID,p=we(c,a,h,d);return d?(this.count=f,this.nodes=p,this):new Br(t,f,p)}},{});var zr=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n},Nr=zr;kn.createClass(zr,{get:function(t,e,n,i){for(var o=this.entries,s=0,a=o.length;a>s;s++)if(r(n,o[s][0]))return o[s][1];return i},update:function(t,e,n,i,o,a,c){void 0===n&&(n=g(i));var l=o===Dn;if(n!==this.keyHash)return l?this:(s(c),s(a),fe(this,t,e,n,[i,o]));for(var h=this.entries,f=0,d=h.length;d>f&&!r(i,h[f][0]);f++);var p=d>f;if(p?h[f][1]===o:l)return this;if(s(c),(l||!p)&&s(a),l&&2===d)return new Pr(t,this.keyHash,h[1^f]);var m=t&&t===this.ownerID,v=m?h:u(h);return p?l?f===d-1?v.pop():v[f]=v.pop():v[f]=[i,o]:v.push([i,o]),m?(this.entries=v,this):new Nr(t,this.keyHash,v)}},{});var Pr=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n},qr=Pr;kn.createClass(Pr,{get:function(t,e,n,i){return r(n,this.entry[0])?this.entry[1]:i},update:function(t,e,n,i,o,a,u){var c=o===Dn,l=r(i,this.entry[0]);return(l?o===this.entry[1]:c)?this:(s(u),c?void s(a):l?t&&t===this.ownerID?(this.entry[1]=o,this):new qr(t,this.keyHash,[i,o]):(s(a),fe(this,t,e,g(i),[i,o])))}},{}),xr.prototype.iterate=zr.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;i>=r;r++)if(t(n[e?i-r:r])===!1)return!1},Ar.prototype.iterate=Or.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;i>=r;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},Pr.prototype.iterate=function(t){return t(this.entry)};var Mr=function(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&se(t._root)};kn.createClass(Mr,{next:function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return oe(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,n>=i)return oe(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,n>=i){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return oe(t,o.entry);e=this._stack=se(o,e)}continue}e=this._stack=this._stack.__prev}return E()}},{},Fn);var Rr,jr=Sn/4,Kr=Sn/2,Wr=Sn/4,Hr=function(t,e){this._iter=t,this._useKeys=e,this.size=t.size};kn.createClass(Hr,{get:function(t,e){return this._iter.get(t,e)},has:function(t){return this._iter.has(t)},valueSeq:function(){return this._iter.valueSeq()},reverse:function(){var t=this,e=Ie(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},map:function(t,e){var n=this,r=Se(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},__iterate:function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?We(this):0,function(i){return t(i,e?--n:n++,r)}),e)},__iterator:function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(jn,e),r=e?We(this):0;return new Fn(function(){var i=n.next();return i.done?i:C(t,e?--r:r++,i.value,i)})}},{},sr),Hr.prototype[Xn]=!0;var $r=function(t){this._iter=t,this.size=t.size};kn.createClass($r,{contains:function(t){return this._iter.contains(t)},__iterate:function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},__iterator:function(t,e){var n=this._iter.__iterator(jn,e),r=0;return new Fn(function(){var e=n.next();return e.done?e:C(t,r++,e.value,e)})}},{},ur);var Fr=function(t){this._iter=t,this.size=t.size};kn.createClass(Fr,{has:function(t){return this._iter.contains(t)},__iterate:function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},__iterator:function(t,e){var n=this._iter.__iterator(jn,e);return new Fn(function(){var e=n.next();return e.done?e:C(t,e.value,e.value,e)})}},{},lr);var Ur=function(t){this._iter=t,this.size=t.size};kn.createClass(Ur,{entrySeq:function(){return this._iter.toSeq()},__iterate:function(t,e){var n=this;return this._iter.__iterate(function(e){return e?(Ke(e),t(e[1],e[0],n)):void 0},e)},__iterator:function(t,e){var n=this._iter.__iterator(jn,e);return new Fn(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r)return Ke(r),t===Kn?e:C(t,r[0],r[1],e)}})}},{},sr),$r.prototype.cacheResult=Hr.prototype.cacheResult=Fr.prototype.cacheResult=Ur.prototype.cacheResult=Fe;var Jr=function(t){var e=Ge();if(null===t||void 0===t)return e;if(Je(t))return t;var n=nr(t),r=n.size;return 0===r?e:(c(r),r>0&&Sn>r?Ye(0,r,En,null,new Gr(n.toArray())):e.withMutations(function(t){t.setSize(r),n.forEach(function(e,n){return t.set(n,e)})}))};kn.createClass(Jr,{toString:function(){return this.__toString("List [","]")},get:function(t,e){if(t=h(this,t),0>t||t>=this.size)return e;t+=this._origin;var n=tn(this,t);return n&&n.array[t&In]},set:function(t,e){return Qe(this,t,e)},remove:function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},clear:function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=En,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ge()},push:function(){var t=arguments,e=this.size;return this.withMutations(function(n){en(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},pop:function(){return en(this,0,-1)},unshift:function(){var t=arguments;return this.withMutations(function(e){en(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},shift:function(){return en(this,1)},merge:function(){return nn(this,void 0,arguments)},mergeWith:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return nn(this,t,e)},mergeDeep:function(){return nn(this,_e(void 0),arguments)},mergeDeepWith:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return nn(this,_e(t),e)},setSize:function(t){return en(this,0,t)},slice:function(t,e){var n=this.size;return d(t,e,n)?this:en(this,p(t,n),m(e,n))},__iterator:function(t,e){var n=0,r=Ve(this,e);return new Fn(function(){var e=r();return e===Zr?E():C(t,n++,e)})},__iterate:function(t,e){for(var n,r=0,i=Ve(this,e);(n=i())!==Zr&&t(n,r++,this)!==!1;);return r},__ensureOwner:function(t){return t===this.__ownerID?this:t?Ye(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)}},{of:function(){return this(arguments)}},wr),Jr.isList=Je;var Vr="@@__IMMUTABLE_LIST__@@",Yr=Jr.prototype;Yr[Vr]=!0,Yr[Cn]=Yr.remove,Yr.setIn=Dr.setIn,Yr.deleteIn=Yr.removeIn=Dr.removeIn,Yr.update=Dr.update,Yr.updateIn=Dr.updateIn,Yr.mergeIn=Dr.mergeIn,Yr.mergeDeepIn=Dr.mergeDeepIn,Yr.withMutations=Dr.withMutations,Yr.asMutable=Dr.asMutable,Yr.asImmutable=Dr.asImmutable,Yr.wasAltered=Dr.wasAltered;var Gr=function(t,e){this.array=t,this.ownerID=e},Qr=Gr;kn.createClass(Gr,{removeBefore:function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n>>>e&In;if(r>=this.array.length)return new Qr([],t);var i,o=0===r;if(e>0){var s=this.array[r];if(i=s&&s.removeBefore(t,e-En,n),i===s&&o)return this}if(o&&!i)return this;var a=Ze(this,t);if(!o)for(var u=0;r>u;u++)a.array[u]=void 0;return i&&(a.array[r]=i),a},removeAfter:function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n-1>>>e&In;if(r>=this.array.length)return this;var i,o=r===this.array.length-1;if(e>0){var s=this.array[r];if(i=s&&s.removeAfter(t,e-En,n),i===s&&o)return this}if(o&&!i)return this;var a=Ze(this,t);return o||a.array.pop(),i&&(a.array[r]=i),a}},{});var Xr,Zr={},ti=function(t){return null===t||void 0===t?an():on(t)?t:an().withMutations(function(e){var n=tr(t);c(n.size),n.forEach(function(t,n){return e.set(n,t)})})};kn.createClass(ti,{toString:function(){return this.__toString("OrderedMap {","}")},get:function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},clear:function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):an()},set:function(t,e){return un(this,t,e)},remove:function(t){return un(this,t,Dn)},wasAltered:function(){return this._map.wasAltered()||this._list.wasAltered()},__iterate:function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},__iterator:function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?sn(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)}},{of:function(){return this(arguments)}},Sr),ti.isOrderedMap=on,ti.prototype[Xn]=!0,ti.prototype[Cn]=ti.prototype.remove;var ei,ni=function(t){return null===t||void 0===t?hn():cn(t)?t:hn().unshiftAll(t)},ri=ni;kn.createClass(ni,{toString:function(){return this.__toString("Stack [","]")},get:function(t,e){for(var n=this._head;n&&t--;)n=n.next;return n?n.value:e},peek:function(){return this._head&&this._head.value},push:function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):ln(t,e)},pushAll:function(t){if(t=nr(t),0===t.size)return this;c(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):ln(e,n)},pop:function(){return this.slice(1)},unshift:function(){return this.push.apply(this,arguments)},unshiftAll:function(t){return this.pushAll(t)},shift:function(){return this.pop.apply(this,arguments)},clear:function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):hn()},slice:function(t,e){if(d(t,e,this.size))return this;var n=p(t,this.size),r=m(e,this.size);if(r!==this.size)return kn.superCall(this,ri.prototype,"slice",[t,e]);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):ln(i,o)},__ensureOwner:function(t){return t===this.__ownerID?this:t?ln(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},__iterate:function(t,e){if(e)return this.toSeq().cacheResult.__iterate(t,e);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},__iterator:function(t,e){if(e)return this.toSeq().cacheResult().__iterator(t,e);var n=0,r=this._head;return new Fn(function(){if(r){var e=r.value;return r=r.next,C(t,n++,e)}return E()})}},{of:function(){return this(arguments)}},wr),ni.isStack=cn;var ii="@@__IMMUTABLE_STACK__@@",oi=ni.prototype;oi[ii]=!0,oi.withMutations=Dr.withMutations,oi.asMutable=Dr.asMutable,oi.asImmutable=Dr.asImmutable,oi.wasAltered=Dr.wasAltered;var si,ai=function(t){return null===t||void 0===t?mn():fn(t)?t:mn().withMutations(function(e){var n=rr(t);c(n.size),n.forEach(function(t){return e.add(t)})})};kn.createClass(ai,{toString:function(){return this.__toString("Set {","}")},has:function(t){return this._map.has(t)},add:function(t){return dn(this,this._map.set(t,!0))},remove:function(t){return dn(this,this._map.remove(t))},clear:function(){return dn(this,this._map.clear())},union:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0===this.size&&1===t.length?this.constructor(t[0]):this.withMutations(function(e){for(var n=0;n<t.length;n++)rr(t[n]).forEach(function(t){return e.add(t)})})},intersect:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return rr(t)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.every(function(t){return t.contains(n)})||e.remove(n)})})},subtract:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return rr(t)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.some(function(t){return t.contains(n)})&&e.remove(n)})})},merge:function(){return this.union.apply(this,arguments)},mergeWith:function(){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.union.apply(this,t)},sort:function(t){return hi(Me(this,t))},sortBy:function(t,e){return hi(Me(this,e,t))},wasAltered:function(){return this._map.wasAltered()},__iterate:function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},__iterator:function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)}},{of:function(){return this(arguments)},fromKeys:function(t){return this(tr(t).keySeq())}},Cr),ai.isSet=fn;var ui="@@__IMMUTABLE_SET__@@",ci=ai.prototype;ci[ui]=!0,ci[Cn]=ci.remove,ci.mergeDeep=ci.merge,ci.mergeDeepWith=ci.mergeWith,ci.withMutations=Dr.withMutations,ci.asMutable=Dr.asMutable,ci.asImmutable=Dr.asImmutable,ci.__empty=mn,ci.__make=pn;var li,hi=function(t){return null===t||void 0===t?gn():vn(t)?t:gn().withMutations(function(e){var n=rr(t);c(n.size),n.forEach(function(t){return e.add(t)})})};kn.createClass(hi,{toString:function(){return this.__toString("OrderedSet {","}")}},{of:function(){return this(arguments)},fromKeys:function(t){return this(tr(t).keySeq())}},ai),hi.isOrderedSet=vn;var fi=hi.prototype;fi[Xn]=!0,fi.__empty=gn,fi.__make=_n;var di,pi=function(t,e){var n=function(t){return this instanceof n?void(this._map=Sr(t)):new n(t)},r=Object.keys(t),o=n.prototype=Object.create(mi);o.constructor=n,e&&(o._name=e),o._defaultValues=t,o._keys=r,o.size=r.length;try{r.forEach(function(t){Object.defineProperty(n.prototype,t,{get:function(){return this.get(t)},set:function(e){i(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})})}catch(s){}return n};kn.createClass(pi,{toString:function(){return this.__toString(yn(this)+" {","}")},has:function(t){return this._defaultValues.hasOwnProperty(t)},get:function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},clear:function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=Object.getPrototypeOf(this).constructor;return t._empty||(t._empty=bn(this,ue()))},set:function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+yn(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:bn(this,n)},remove:function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:bn(this,e)},wasAltered:function(){return this._map.wasAltered()},__iterator:function(t,e){var n=this;return tr(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},__iterate:function(t,e){var n=this;return tr(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},__ensureOwner:function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?bn(this,e,t):(this.__ownerID=t,this._map=e,this)}},{},br);var mi=pi.prototype;mi[Cn]=mi.remove,mi.deleteIn=mi.removeIn=Dr.removeIn,mi.merge=Dr.merge,mi.mergeWith=Dr.mergeWith,mi.mergeIn=Dr.mergeIn,mi.mergeDeep=Dr.mergeDeep,mi.mergeDeepWith=Dr.mergeDeepWith,mi.mergeDeepIn=Dr.mergeDeepIn,mi.setIn=Dr.setIn,mi.update=Dr.update,mi.updateIn=Dr.updateIn,mi.withMutations=Dr.withMutations,mi.asMutable=Dr.asMutable,mi.asImmutable=Dr.asImmutable;var vi=function(t,e,n){return this instanceof _i?(i(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),t===e&&bi?bi:(n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,void(this.size=Math.max(0,Math.ceil((e-t)/n-1)+1)))):new _i(t,e,n)},_i=vi;kn.createClass(vi,{toString:function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},get:function(t,e){return this.has(t)?this._start+h(this,t)*this._step:e},contains:function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},slice:function(t,e){return d(t,e,this.size)?this:(t=p(t,this.size),e=m(e,this.size),t>=e?bi:new _i(this.get(t,this._end),this.get(e,this._end),this._step))},indexOf:function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},lastIndexOf:function(t){return this.indexOf(t)},take:function(t){return this.slice(0,Math.max(0,t))},skip:function(t){return this.slice(Math.max(0,t))},__iterate:function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;n>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},__iterator:function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new Fn(function(){var s=i;return i+=e?-r:r,o>n?E():C(t,o++,s)})},equals:function(t){return t instanceof _i?this._start===t._start&&this._end===t._end&&this._step===t._step:j(this,t)}},{},ur);var gi=vi.prototype;gi.__toJS=gi.toArray,gi.first=Yr.first,gi.last=Yr.last;var bi=vi(0,0),yi=function(t,e){return 0>=e&&Ci?Ci:this instanceof wi?(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),void(0===this.size&&(Ci=this))):new wi(t,e)},wi=yi;kn.createClass(yi,{toString:function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},get:function(t,e){return this.has(t)?this._value:e},contains:function(t){return r(this._value,t)},slice:function(t,e){var n=this.size;return d(t,e,n)?this:new wi(this._value,m(e,n)-p(t,n))},reverse:function(){return this},indexOf:function(t){return r(this._value,t)?0:-1},lastIndexOf:function(t){return r(this._value,t)?this.size:-1},__iterate:function(t){for(var e=0;e<this.size;e++)if(t(this._value,e,this)===!1)return e+1;return e},__iterator:function(t){var e=this,n=0;return new Fn(function(){return n<e.size?C(t,n++,e._value):E()})},equals:function(t){return t instanceof wi?r(this._value,t._value):j(t)}},{},ur);var ki=yi.prototype;ki.last=ki.first,ki.has=gi.has,ki.take=gi.take,ki.skip=gi.skip,ki.__toJS=gi.__toJS;var Ci,Ei={Iterable:Jn,Seq:ir,Collection:gr,Map:Sr,OrderedMap:ti,List:Jr,Stack:ni,Set:ai,OrderedSet:hi,Record:pi,Range:vi,Repeat:yi,is:r,fromJS:te};return Ei}t.exports=e()},function(t,e,n){var r=n(9);t.exports=r({EDIT_MODE:null,PREVIEW_MODE:null})},function(t){"use strict";var e=function(t,e,n,r,i,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],l=0;u=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return c[l++]}))}throw u.framesToPop=1,u}};t.exports=e},function(t,e,n){var r=n(13),i=n(2),o={create:function(t){var e=r.BLOCK_CREATE,n=t.position;i.dispatch({type:e,params:t,position:n})},destroy:function(t){var e=r.BLOCK_DESTROY;i.dispatch(Object.assign({type:e},t))},update:function(t,e){var n=r.BLOCK_UPDATE;i.dispatch({type:n,blockId:t,content:e})}};t.exports=o},function(t,e,n){var r=n(4),i=(n(6),r.Set()),o={unsubscribe:function(t){i=i.remove(t)},subscribe:function(t){i=i.add(t)},publish:function(){i.forEach(function(t){return t()})}};t.exports=o},function(t,e,n){"use strict";var r=n(6),i=function(t){var e,n={};r(t instanceof Object&&!Array.isArray(t));for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};t.exports=i},function(t,e,n){var r=n(8),i=(n(6),{getInitialState:function(){return this.getState()},updateState:function(){this.setState(this.getState())},componentDidMount:function(){r.subscribe(this.updateState)},componentWillUnmount:function(){r.unsubscribe(this.updateState)},componentWillReceiveProps:function(){this.updateState()}});t.exports=i},function(t,e,n){var r=n(25),i=n(2),o=n(4),s=(n(1),n(6)),a=o.List(),u={icon:null,types:null},c={keys:function(){return a.toArray().map(function(t){return t.id})},find:function(t){return a.find(function(e){return e.id===t})||null},_create:function(t){var e=Object.assign({},u,t);s(e.id,"BlockType must have an identifier"),a=a.push(e)},dispatchToken:i.register(function(t){switch(t.type){case r.BLOCK_TYPE_CREATE:c._create(t.params)}})};t.exports=c},function(t,e,n){var r=n(1),i=r.createClass({displayName:"Button",getDefaultProps:function(){return{tagName:"button"}},render:function(){var t=this.props,e=t.children,n=t.tagName,i=function(t,e){var n={},r=Object.prototype.hasOwnProperty;if(null==t)throw new TypeError;for(var i in t)r.call(t,i)&&!r.call(e,i)&&(n[i]=t[i]);return n}(t,{children:1,tagName:1});return r.createElement(n,i,[e])}});t.exports=i},function(t,e,n){var r=n(9),i=r({BLOCK_CREATE:null,BLOCK_UPDATE:null,BLOCK_DESTROY:null});t.exports=i},function(t,e,n){var r=n(8),i=n(60),o=n(13),s=n(2),a=n(4),u=a.List(),c={all:function(){return u},last:function(){return u.last()},find:function(t){return u.find(function(e){return e.id===t})},_create:function(t){var e=t.content,n=t.type,o=t.parentBlockListId,s=new i({content:e,type:n,parentBlockListId:o});return u=u.push(s),r.publish(),s},_destroy:function(t){u=u.filter(function(e){return e.id!==t}),r.publish()},_update:function(t,e){var n=c.find(t);n&&(n.content=Object.assign({},n.content,e),r.publish())},dispatchToken:s.register(function(t){switch(t.type){case o.BLOCK_CREATE:var e=c._create(t.params);t.block=e;break;case o.BLOCK_DESTROY:c._destroy(t.blockId);break;case o.BLOCK_UPDATE:c._update(t.blockId,t.content)}})};t.exports=c},function(t){var e=0,n=function(){return e+=1};t.exports=n},function(t,e,n){var r=n(1),i=(r.PropTypes,r.createClass({displayName:"Field",getDefaultProps:function(){return{type:"text"}},render:function(){var t=this.props,e=t.label,n=t.name,i=t.type,o=function(t,e){var n={},r=Object.prototype.hasOwnProperty;if(null==t)throw new TypeError;for(var i in t)r.call(t,i)&&!r.call(e,i)&&(n[i]=t[i]);return n}(t,{label:1,name:1,type:1});return r.createElement("div",{className:"col-img-field"},r.createElement("label",{className:"col-img-label",htmlFor:n||this.props.id},e),r.createElement("input",r.__spread({className:"col-img-input",type:i},o,{name:n||this.props.id})))}}));t.exports=i},function(t,e,n){var r=n(1),i=(r.PropTypes,r.createClass({displayName:"Graphic",getCaption:function(){var t=this.props.caption;return t?r.createElement("figcaption",{className:"col-img-caption"},t):null},render:function(){{var t=this.props,e=t.src;t.credit}return e?r.createElement("figure",{className:"col-img-figure"},r.createElement("img",{className:"col-img-graphic",src:e,alt:""}),this.getCaption()):null}}));t.exports=i},function(t,e,n){var r=n(1),i="https://www.youtube.com/embed/",o=r.createClass({displayName:"Player",render:function(){var t=this.props,e=t.video_id;return e?r.createElement("div",{className:"col-youtube-player"},r.createElement("iframe",{className:"col-youtube-frame",src:i+e,frameBorder:"0",allowFullScreen:!0})):null}});t.exports=o},function(t,e,n){var r=n(24),i=n(2),o={create:function(t){var e=r.BLOCK_LIST_CREATE;i.dispatch({type:e,params:t})},move:function(t,e,n){var o=r.BLOCK_LIST_MOVE;i.dispatch({type:o,blockListId:t,fromId:e,toId:n})}};t.exports=o},function(t,e,n){var r=n(26),i=n(2),o={create:function(t){var e=r.EDITOR_CREATE;i.dispatch({type:e,params:t})},update:function(t,e){var n=r.EDITOR_UPDATE;i.dispatch({type:n,id:t,params:e})}};t.exports=o},function(t,e,n){var r=n(7),i=n(11),o=n(10),s=n(59),a=n(1),u=a.createClass({displayName:"Block",mixins:[o,s],propTypes:{block:a.PropTypes.any.isRequired},getState:function(){return i.find(this.props.block.type)},render:function(){var t=this.props,e=t.block,n=function(t,e){var n={},r=Object.prototype.hasOwnProperty;if(null==t)throw new TypeError;for(var i in t)r.call(t,i)&&!r.call(e,i)&&(n[i]=t[i]);return n}(t,{block:1}),r=this.state,i=r.component;return a.createElement(i,a.__spread({initialContent:e.content,updateContent:this._onUpdateContent},n))},_onUpdateContent:function(t){r.update(this.props.block.id,t)}});t.exports=u},function(t,e,n){var r=n(49),i=n(52),o=n(27),s=n(71),a=s.addons.CSSTransitionGroup,u=s.createClass({displayName:"EditorBlockList",mixins:[o],getBlockMenu:function(t){var e=this.props,n=e.block,i=e.editor;return s.createElement(r,{key:"block_menu",block:n,editor:i,parentBlockListId:this.blockListId(),position:t})},getBlock:function(t,e){return s.createElement("div",{key:t},s.createElement(i,{initialBlockId:t,editor:this.props.editor}),this.getBlockMenu(e+1))},render:function(){var t=this.state.blockIds;
return s.createElement(a,{component:"div",className:"col-blocks",transitionName:"col-block"},this.getBlockMenu(0),t.map(this.getBlock))}});t.exports=u},function(t,e,n){var r=n(27),i=n(55),o=n(1),s=o.createClass({displayName:"PreviewerBlockList",mixins:[r],blockComponents:function(){return this.state.blockIds.map(function(t){return o.createElement(i,{key:t,initialBlockId:t})})},render:function(){return o.createElement("div",{className:"col-blocks"},this.blockComponents())}});t.exports=s},function(t,e,n){var r=n(9),i=r({BLOCK_LIST_CREATE:null,BLOCK_LIST_MOVE:null});t.exports=i},function(t,e,n){var r=n(9),i=r({BLOCK_TYPE_CREATE:null});t.exports=i},function(t,e,n){var r=n(9);t.exports=r({EDITOR_CREATE:null,EDITOR_UPDATE:null})},function(t,e,n){var r=n(3),i=n(10),o=(n(1),{mixins:[i],getState:function(){return{blockIds:this.blockIds()}},blockList:function(){return r.find(this.blockListId())},blockListId:function(){return this.props.initialBlockListId},blockIds:function(){var t=this.blockList();return t?t.all():[]}});t.exports=o},function(t,e,n){var r=n(1),i=n(14),o=n(3),s={propTypes:{editor:r.PropTypes.any.isRequired},getInitialState:function(){var t=this.props.initialBlockId;return{block:i.find(t),blockList:o.findByBlockId(t)}},childBlockListComponent:function(){var t=this.state,e=t.block,n=t.blockList,i=this.props,o=i.editor,s=this.listComponent();return n?r.createElement(s,{block:e,editor:o,initialBlockListId:n.id}):void 0}};t.exports=s},function(t,e,n){var r=n(1),i=n(58),o=n(30);t.exports=function(t){var e=t.mixins||[];return e.indexOf(i)<0&&(e=e.concat(i)),r.createClass(o({},t,{React:r,mixins:e}))}},function(t){"use strict";function e(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t){for(var n,r,i=e(t),o=1;o<arguments.length;o++){n=arguments[o],r=Object.keys(Object(n));for(var s=0;s<r.length;s++)i[r[s]]=n[r[s]]}return i}},function(){!function(){if(!Array.prototype.find){var t=function(t){var e=Object(this),n=e.length<0?0:e.length>>>0;if(0===n)return void 0;if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var r,i=arguments[1],o=0;n>o;o++)if(r=e[o],t.call(i,r,o,e))return r;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:t,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.find||(Array.prototype.find=t)}}(this)},function(t,e,n){t.exports.Dispatcher=n(33)},function(t,e,n){"use strict";function r(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var i=n(34),o=1,s="ID_";r.prototype.register=function(t){var e=s+o++;return this.$Dispatcher_callbacks[e]=t,e},r.prototype.unregister=function(t){i(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},r.prototype.waitFor=function(t){i(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?i(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(i(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},r.prototype.dispatch=function(t){i(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},r.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},r.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},r.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},r.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},t.exports=r},function(t){"use strict";var e=function(t,e,n,r,i,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],l=0;u=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return c[l++]}))}throw u.framesToPop=1,u}};t.exports=e},function(t,e,n){var r=n(16),i=n(17),o=n(1),s=o.PropTypes,a=o.createClass({displayName:"Editor",propTypes:{src:s.string,caption:s.string,attribution:s.string,onChange:s.func.isRequired},render:function(){var t=this.props,e=t.src,n=t.caption,s=t.attribution;return o.createElement("div",{className:"col-img"},o.createElement(i,o.__spread({},this.props)),o.createElement("fieldset",{className:"col-img-fieldset"},o.createElement(r,{label:"Image Source",type:"url",value:e,name:"image_src",onChange:this._onSrcChange}),o.createElement(r,{label:"Caption",type:"text",value:n,name:"image_caption",onChange:this._onCaptionChange}),o.createElement(r,{label:"Attribution",type:"text",value:s,name:"image_attribution",onChange:this._onAttributionChange})))},_onSrcChange:function(t){this.props.onChange({src:t.currentTarget.value})},_onCaptionChange:function(t){this.props.onChange({caption:t.currentTarget.value})},_onAttributionChange:function(t){this.props.onChange({attribution:t.currentTarget.value})}});t.exports=a},function(t,e,n){var r=n(35),i=n(37),o=n(1);n(67);var s={defaultContent:function(){return{src:"",caption:"",attribution:""}},renderEditor:function(){return o.createElement(r,o.__spread({onChange:this.setContent},this.state.content))},renderPreviewer:function(){return o.createElement(i,o.__spread({},this.state.content))}};t.exports=s},function(t,e,n){var r=n(1),i=n(17),o=r.createClass({displayName:"Previewer",render:function(){return r.createElement(i,r.__spread({},this.props))}});t.exports=o},function(t,e,n){var r=n(41),i=n(1),o=i.PropTypes,s=i.createClass({displayName:"Editor",propTypes:{html:o.string.isRequired,onBlur:o.func.isRequired},getDefaultProps:function(){return{options:{buttons:["header1","header2","bold","italic","underline","anchor","quote","unorderedlist","orderedlist"],firstHeader:"h1",secondHeader:"h2",diffLeft:0,diffTop:-10,disableDoubleReturn:!0}}},shouldComponentUpdate:function(){return!1},componentDidMount:function(){this.setState({editor:new r(this.refs.editor.getDOMNode(),this.props.options)})},componentWillUnmount:function(){this.state.editor.deactivate()},render:function(){return i.createElement("div",{className:"col-block-content"},i.createElement("div",{className:"col-medium",onBlur:this._onBlur,role:"textarea","aria-multiline":"true",ref:"editor",dangerouslySetInnerHTML:{__html:this.props.html}}))},_onBlur:function(){var t=this.refs.editor.getDOMNode();this.props.onBlur({text:t.textContent,html:t.innerHTML})}});t.exports=s},function(t,e,n){var r=n(38),i=n(40),o=n(1);n(68);var s={defaultContent:function(){return{html:"",text:""}},renderEditor:function(){return o.createElement(r,o.__spread({onBlur:this.setContent},this.state.content))},renderPreviewer:function(){return o.createElement(i,o.__spread({},this.state.content))}};t.exports=s},function(t,e,n){var r=n(1),i=r.createClass({displayName:"Previewer",render:function(){return r.createElement("div",{className:"col-block-content"},r.createElement("div",{className:"col-medium-preview",dangerouslySetInnerHTML:{__html:this.props.html}}))}});t.exports=i},function(t){function e(t,e){"use strict";return this.init(t,e)}t.exports=e,function(t,n){"use strict";function r(t,e){var n;if(void 0===t)return e;for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)===!1&&(t[n]=e[n]);return t}function i(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}function o(){var t,e,n,r=this.options.contentWindow.getSelection();if(r.getRangeAt&&r.rangeCount){for(n=[],t=0,e=r.rangeCount;e>t;t+=1)n.push(r.getRangeAt(t));return n}return null}function s(t){var e,n,r=this.options.contentWindow.getSelection();if(t)for(r.removeAllRanges(),e=0,n=t.length;n>e;e+=1)r.addRange(t[e])}function a(){var t=this.options.ownerDocument.getSelection().anchorNode,e=t&&3===t.nodeType?t.parentNode:t;return e}function u(){var t,e,n,r,i="";if(void 0!==this.options.contentWindow.getSelection){if(e=this.options.contentWindow.getSelection(),e.rangeCount){for(r=this.options.ownerDocument.createElement("div"),t=0,n=e.rangeCount;n>t;t+=1)r.appendChild(e.getRangeAt(t).cloneContents());i=r.innerHTML}}else void 0!==this.options.ownerDocument.selection&&"Text"===this.options.ownerDocument.selection.type&&(i=this.options.ownerDocument.selection.createRange().htmlText);return i}function c(t){return!(!t||1!==t.nodeType)}e.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,cleanPastedHTML:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,elementsContainer:!1,contentWindow:t,ownerDocument:n,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorTarget:!1,anchorButton:!1,anchorButtonClass:"btn",extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last"},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(t,e){return this.options=r(e,this.defaults),this.setElementSelection(t),0!==this.elements.length?(this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.options.elementsContainer||(this.options.elementsContainer=n.body),this.id=this.options.elementsContainer.querySelectorAll(".medium-editor-toolbar").length+1,this.setup()):void 0},setup:function(){this.events=[],this.isActive=!0,this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().passInstance()},on:function(t,e,n,r){t.addEventListener(e,n,r),this.events.push([t,e,n,r])},off:function(t,e,n,r){var i,o=this.events.indexOf([t,e,n,r]);-1!==o&&(i=this.events.splice(o,1),i[0].removeEventListener(i[1],i[2],i[3]))},removeAllEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},initElements:function(){this.updateElementList();var t,e=!1;for(t=0;t<this.elements.length;t+=1)this.options.disableEditing||this.elements[t].getAttribute("data-disable-editing")||this.elements[t].setAttribute("contentEditable",!0),this.elements[t].getAttribute("data-placeholder")||this.elements[t].setAttribute("data-placeholder",this.options.placeholder),this.elements[t].setAttribute("data-medium-element",!0),this.bindParagraphCreation(t).bindReturn(t).bindTab(t),this.options.disableToolbar||this.elements[t].getAttribute("data-disable-toolbar")||(e=!0);return e&&this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview(),this},setElementSelection:function(t){this.elementSelection=t,this.updateElementList()},updateElementList:function(){this.elements="string"==typeof this.elementSelection?this.options.ownerDocument.querySelectorAll(this.elementSelection):this.elementSelection,1===this.elements.nodeType&&(this.elements=[this.elements])},serialize:function(){var t,e,n={};for(t=0;t<this.elements.length;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},callExtensions:function(t){if(!(arguments.length<1)){var e,n,r=Array.prototype.slice.call(arguments,1);for(n in this.options.extensions)this.options.extensions.hasOwnProperty(n)&&(e=this.options.extensions[n],void 0!==e[t]&&e[t].apply(e,r))}},passInstance:function(){var t,e,n=this;for(e in n.options.extensions)n.options.extensions.hasOwnProperty(e)&&(t=n.options.extensions[e],t.parent&&(t.base=n));return n},bindParagraphCreation:function(t){var e=this;return this.on(this.elements[t],"keypress",function(t){var r,i=a.call(e);32===t.which&&(r=i.tagName.toLowerCase(),"a"===r&&n.execCommand("unlink",!1,null))}),this.on(this.elements[t],"keyup",function(t){var r,i,o=a.call(e);o&&o.getAttribute("data-medium-element")&&0===o.children.length&&!e.options.disableReturn&&!o.getAttribute("data-disable-return")&&n.execCommand("formatBlock",!1,"p"),13===t.which&&(o=a.call(e),r=o.tagName.toLowerCase(),i=e.getSelectionElement(),e.options.disableReturn||i.getAttribute("data-disable-return")||"li"===r||e.isListItemChild(o)||(t.shiftKey||n.execCommand("formatBlock",!1,"p"),"a"===r&&n.execCommand("unlink",!1,null)))}),this},isListItemChild:function(t){for(var e=t.parentNode,n=e.tagName.toLowerCase();-1===this.parentElements.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(e=e.parentNode,!e||!e.tagName)return!1;n=e.tagName.toLowerCase()}return!1},bindReturn:function(t){var e=this;return this.on(this.elements[t],"keypress",function(t){if(13===t.which)if(e.options.disableReturn||this.getAttribute("data-disable-return"))t.preventDefault();else if(e.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var n=a.call(e);n&&"\n"===n.innerText&&t.preventDefault()}}),this},bindTab:function(t){var e=this;return this.on(this.elements[t],"keydown",function(t){if(9===t.which){var r=a.call(e).tagName.toLowerCase();"pre"===r&&(t.preventDefault(),n.execCommand("insertHtml",null,"    ")),"li"===r&&(t.preventDefault(),t.shiftKey?n.execCommand("outdent",t):n.execCommand("indent",t))}}),this},buttonTemplate:function(t){var e=this.getButtonLabels(this.options.buttonLabels),n={bold:'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+e.bold+"</button>",italic:'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+e.italic+"</button>",underline:'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+e.underline+"</button>",strikethrough:'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike">'+e.strikethrough+"</button>",superscript:'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+e.superscript+"</button>",subscript:'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+e.subscript+"</button>",anchor:'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+e.anchor+"</button>",image:'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+e.image+"</button>",header1:'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+e.header1+"</button>",header2:'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+e.header2+"</button>",quote:'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+e.quote+"</button>",orderedlist:'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+e.orderedlist+"</button>",unorderedlist:'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+e.unorderedlist+"</button>",pre:'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+e.pre+"</button>",indent:'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+e.indent+"</button>",outdent:'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+e.outdent+"</button>",justifyCenter:'<button class="medium-editor-action medium-editor-action-justifyCenter" data-action="justifyCenter" data-element="">'+e.justifyCenter+"</button>",justifyFull:'<button class="medium-editor-action medium-editor-action-justifyFull" data-action="justifyFull" data-element="">'+e.justifyFull+"</button>",justifyLeft:'<button class="medium-editor-action medium-editor-action-justifyLeft" data-action="justifyLeft" data-element="">'+e.justifyLeft+"</button>",justifyRight:'<button class="medium-editor-action medium-editor-action-justifyRight" data-action="justifyRight" data-element="">'+e.justifyRight+"</button>"};return n[t]||!1},getButtonLabels:function(t){var e,n,r={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",strikethrough:"<s>A</s>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>",justifyCenter:"<b>C</b>",justifyFull:"<b>J</b>",justifyLeft:"<b>L</b>",justifyRight:"<b>R</b>"};if("fontawesome"===t?e={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',strikethrough:'<i class="fa fa-strikethrough"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>',justifyCenter:'<i class="fa fa-align-center"></i>',justifyFull:'<i class="fa fa-align-justify"></i>',justifyLeft:'<i class="fa fa-align-left"></i>',justifyRight:'<i class="fa fa-align-right"></i>'}:"object"==typeof t&&(e=t),"object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-input"),this.anchorTarget=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-target"),this.anchorButton=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-button"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var t=n.createElement("div");return t.id="medium-editor-toolbar-"+this.id,t.className="medium-editor-toolbar",t.appendChild(this.toolbarButtons()),t.appendChild(this.toolbarFormAnchor()),this.options.elementsContainer.appendChild(t),t},toolbarButtons:function(){var t,e,r,i,o=this.options.buttons,s=n.createElement("ul");for(s.id="medium-editor-toolbar-actions",s.className="medium-editor-toolbar-actions clearfix",e=0;e<o.length;e+=1)this.options.extensions.hasOwnProperty(o[e])?(i=this.options.extensions[o[e]],r=void 0!==i.getButton?i.getButton():null):r=this.buttonTemplate(o[e]),r&&(t=n.createElement("li"),c(r)?t.appendChild(r):t.innerHTML=r,s.appendChild(t));return s},toolbarFormAnchor:function(){var t=n.createElement("div"),e=n.createElement("input"),r=n.createElement("label"),i=n.createElement("input"),o=n.createElement("label"),s=n.createElement("input"),a=n.createElement("a"),u=n.createElement("a");return a.setAttribute("href","#"),a.className="medium-editor-toobar-anchor-close",a.innerHTML="&times;",u.setAttribute("href","#"),u.className="medium-editor-toobar-anchor-save",u.innerHTML="&#10003;",e.setAttribute("type","text"),e.className="medium-editor-toolbar-anchor-input",e.setAttribute("placeholder",this.options.anchorInputPlaceholder),i.setAttribute("type","checkbox"),i.className="medium-editor-toolbar-anchor-target",r.innerHTML="Open in New Window?",r.insertBefore(i,r.firstChild),s.setAttribute("type","checkbox"),s.className="medium-editor-toolbar-anchor-button",o.innerHTML="Button",o.insertBefore(s,o.firstChild),t.className="medium-editor-toolbar-form-anchor",t.id="medium-editor-toolbar-form-anchor",t.appendChild(e),t.appendChild(u),t.appendChild(a),this.options.anchorTarget&&t.appendChild(r),this.options.anchorButton&&t.appendChild(o),t},bindSelect:function(){var t,e=this,r="";for(this.checkSelectionWrapper=function(t){return t&&e.clickingIntoArchorForm(t)?!1:(clearTimeout(r),void(r=setTimeout(function(){e.checkSelection()},e.options.delay)))},this.on(n.documentElement,"mouseup",this.checkSelectionWrapper),t=0;t<this.elements.length;t+=1)this.on(this.elements[t],"keyup",this.checkSelectionWrapper),this.on(this.elements[t],"blur",this.checkSelectionWrapper);return this},checkSelection:function(){var t,e;return this.keepToolbarAlive===!0||this.options.disableToolbar||(t=this.options.contentWindow.getSelection(),""===t.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()||this.selectionInContentEditableFalse()?this.hideToolbarActions():(e=this.getSelectionElement(),!e||e.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(t,e))),this},clickingIntoArchorForm:function(t){var e=this;return t.type&&"blur"===t.type.toLowerCase()&&t.relatedTarget&&t.relatedTarget===e.anchorInput?!0:!1},hasMultiParagraphs:function(){var t=u.call(this).replace(/<[\S]+><\/[\S]+>/gim,""),e=t.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return e?e.length:0},checkSelectionElement:function(t,e){var n;for(this.selection=t,this.selectionRange=this.selection.getRangeAt(0),n=0;n<this.elements.length;n+=1)if(this.elements[n]===e)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},findMatchingSelectionParent:function(t){var e,n,r=this.options.contentWindow.getSelection();if(0===r.rangeCount)return!1;e=r.getRangeAt(0),n=e.commonAncestorContainer;do{if(1===n.nodeType){if(t(n))return n;if(n.getAttribute("data-medium-element"))return!1}n=n.parentNode}while(n);return!1},getSelectionElement:function(){return this.findMatchingSelectionParent(function(t){return t.getAttribute("data-medium-element")})},selectionInContentEditableFalse:function(){return this.findMatchingSelectionParent(function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")})},setToolbarPosition:function(){var t=50,e=this.options.contentWindow.getSelection(),n=e.getRangeAt(0),r=n.getBoundingClientRect(),i=this.options.diffLeft-this.toolbar.offsetWidth/2,o=(r.left+r.right)/2,s=this.toolbar.offsetWidth/2;return r.top<t?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=t+r.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=r.top+this.options.diffTop+this.options.contentWindow.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=s>o?i+s+"px":this.options.contentWindow.innerWidth-o<s?this.options.contentWindow.innerWidth+i-s+"px":i+o+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var t,e=this.toolbarActions.querySelectorAll("button");for(t=0;t<e.length;t+=1)e[t].classList.remove(this.options.activeButtonClass);return this.checkActiveButtons(),this},checkActiveButtons:function(){for(var t=Array.prototype.slice.call(this.elements),e=this.getSelectedParentElement();void 0!==e.tagName&&-1===this.parentElements.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),this.callExtensions("checkState",e),-1===t.indexOf(e));)e=e.parentNode},activateButton:function(t){var e=this.toolbar.querySelector('[data-element="'+t+'"]');null!==e&&-1===e.className.indexOf(this.options.activeButtonClass)&&(e.className+=" "+this.options.activeButtonClass)},bindButtons:function(){var t,e=this.toolbar.querySelectorAll("button"),n=this,r=function(t){t.preventDefault(),t.stopPropagation(),void 0===n.selection&&n.checkSelection(),this.className.indexOf(n.options.activeButtonClass)>-1?this.classList.remove(n.options.activeButtonClass):this.className+=" "+n.options.activeButtonClass,this.hasAttribute("data-action")&&n.execAction(this.getAttribute("data-action"),t)};for(t=0;t<e.length;t+=1)this.on(e[t],"click",r);return this.setFirstAndLastItems(e),this},setFirstAndLastItems:function(t){return t.length>0&&(t[0].className+=" "+this.options.firstButtonClass,t[t.length-1].className+=" "+this.options.lastButtonClass),this},execAction:function(t,e){t.indexOf("append-")>-1?(this.execFormatBlock(t.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===t?this.triggerAnchorAction(e):"image"===t?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):(this.options.ownerDocument.execCommand(t,!1,null),this.setToolbarPosition())},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=null,e=this.selectionRange;return t=this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},triggerAnchorAction:function(){var t=this.getSelectedParentElement();return t.tagName&&"a"===t.tagName.toLowerCase()?this.options.ownerDocument.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(t){var e=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&e.el&&"blockquote"===e.el.parentNode.tagName.toLowerCase())return this.options.ownerDocument.execCommand("outdent",!1,null);if(e.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return this.options.ownerDocument.execCommand("indent",!1,t);t="<"+t+">"}return this.options.ownerDocument.execCommand("formatBlock",!1,t)},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===this.parentElements.indexOf(e);)t=t.parentNode,t&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},getFirstChild:function(t){for(var e=t.firstChild;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var t,e=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(t),t=setTimeout(function(){e.toolbar&&!e.toolbar.classList.contains("medium-editor-toolbar-active")&&e.toolbar.classList.add("medium-editor-toolbar-active")},100)},saveSelection:function(){this.savedSelection=o.call(this)},restoreSelection:function(){s.call(this,this.savedSelection)},showAnchorForm:function(t){this.toolbarActions.style.display="none",this.saveSelection(),this.anchorForm.style.display="block",this.setToolbarPosition(),this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=t||""},bindAnchorForm:function(){var t=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-close"),e=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-save"),n=this;return this.on(this.anchorForm,"click",function(t){t.stopPropagation(),n.keepToolbarAlive=!0}),this.on(this.anchorInput,"keyup",function(t){var e,r=null;13===t.keyCode&&(t.preventDefault(),e=n.options.anchorTarget&&n.anchorTarget.checked?"_blank":"_self",n.options.anchorButton&&n.anchorButton.checked&&(r=n.options.anchorButtonClass),n.createLink(this,e,r))}),this.on(e,"click",function(t){var e,r=null;t.preventDefault(),e=n.options.anchorTarget&&n.anchorTarget.checked?"_blank":"_self",n.options.anchorButton&&n.anchorButton.checked&&(r=n.options.anchorButtonClass),n.createLink(n.anchorInput,e,r)},!0),this.on(this.anchorInput,"click",function(t){t.stopPropagation(),n.keepToolbarAlive=!0}),this.on(this.options.ownerDocument.body,"click",function(t){t.target===n.anchorForm||i(n.anchorForm,t.target)||i(n.toolbarActions,t.target)||(n.keepToolbarAlive=!1,n.checkSelection())},!0),this.on(this.options.ownerDocument.body,"focus",function(t){t.target===n.anchorForm||i(n.anchorForm,t.target)||i(n.toolbarActions,t.target)||(n.keepToolbarAlive=!1,n.checkSelection())},!0),this.on(t,"click",function(t){t.preventDefault(),n.showToolbarActions(),s.call(n,n.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(t){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||t.getAttribute("data-disable-preview"))return!0;var e,n,r,i=this,o=40,s=t.getBoundingClientRect(),a=(s.left+s.right)/2;return i.anchorPreview.querySelector("i").textContent=t.href,e=i.anchorPreview.offsetWidth/2,n=i.options.diffLeft-e,clearTimeout(r),r=setTimeout(function(){i.anchorPreview&&!i.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&i.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),i.observeAnchorPreview(t),i.anchorPreview.classList.add("medium-toolbar-arrow-over"),i.anchorPreview.classList.remove("medium-toolbar-arrow-under"),i.anchorPreview.style.top=Math.round(o+s.bottom-i.options.diffTop+this.options.contentWindow.pageYOffset-i.anchorPreview.offsetHeight)+"px",i.anchorPreview.style.left=e>a?n+e+"px":this.options.contentWindow.innerWidth-a<e?this.options.contentWindow.innerWidth+n-e+"px":n+a+"px",this},observeAnchorPreview:function(t){var e=this,n=(new Date).getTime(),r=!0,i=function(){n=(new Date).getTime(),r=!0},o=function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(r=!1)},s=setInterval(function(){if(r)return!0;var a=(new Date).getTime()-n;a>e.options.anchorPreviewHideDelay&&(e.hideAnchorPreview(),clearInterval(s),e.off(e.anchorPreview,"mouseover",i),e.off(e.anchorPreview,"mouseout",o),e.off(t,"mouseover",i),e.off(t,"mouseout",o))},200);this.on(e.anchorPreview,"mouseover",i),this.on(e.anchorPreview,"mouseout",o),this.on(t,"mouseover",i),this.on(t,"mouseout",o)},createAnchorPreview:function(){var t=this,e=this.options.ownerDocument.createElement("div");return e.id="medium-editor-anchor-preview-"+this.id,e.className="medium-editor-anchor-preview",e.innerHTML=this.anchorPreviewTemplate(),this.options.elementsContainer.appendChild(e),this.on(e,"click",function(){t.anchorPreviewClickHandler()}),e},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},anchorPreviewClickHandler:function(){if(this.activeAnchor){var t=this,e=this.options.ownerDocument.createRange(),n=this.options.contentWindow.getSelection();e.selectNodeContents(t.activeAnchor),n.removeAllRanges(),n.addRange(e),setTimeout(function(){t.activeAnchor&&t.showAnchorForm(t.activeAnchor.href),t.keepToolbarAlive=!1},100+t.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(t){var e=this,n=!0,r=function(){n=!1,e.off(e.activeAnchor,"mouseout",r)
};if(t.target&&"a"===t.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(t.target.outerHTML)||/href=["']#\S+["']/.test(t.target.outerHTML))return!0;if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=t.target,this.on(this.activeAnchor,"mouseout",r),setTimeout(function(){n&&e.showAnchorPreview(t.target)},e.options.delay)}},bindAnchorPreview:function(){var t,e=this;for(this.editorAnchorObserverWrapper=function(t){e.editorAnchorObserver(t)},t=0;t<this.elements.length;t+=1)this.on(this.elements[t],"mouseover",this.editorAnchorObserverWrapper);return this},checkLinkFormat:function(t){var e=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(e.test(t)?"":"http://")+t},setTargetBlank:function(t){var e;if(t=t||a.call(this),"a"===t.tagName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),e=0;e<t.length;e+=1)t[e].target="_blank"},setButtonClass:function(t){var e,n,r=a.call(this),i=t.split(" ");if("a"===r.tagName.toLowerCase())for(n=0;n<i.length;n+=1)r.classList.add(i[n]);else for(r=r.getElementsByTagName("a"),e=0;e<r.length;e+=1)for(n=0;n<i.length;n+=1)r[e].classList.add(i[n])},createLink:function(t,e,n){var r,i;if(0===t.value.trim().length)return void this.hideToolbarActions();if(s.call(this,this.savedSelection),this.options.checkLinkFormat&&(t.value=this.checkLinkFormat(t.value)),this.options.ownerDocument.execCommand("createLink",!1,t.value),(this.options.targetBlank||"_blank"===e)&&this.setTargetBlank(),n&&this.setButtonClass(n),this.options.targetBlank||"_blank"===e||n)for(i=this.options.ownerDocument.createEvent("HTMLEvents"),i.initEvent("input",!0,!0,this.options.contentWindow),r=0;r<this.elements.length;r+=1)this.elements[r].dispatchEvent(i);this.checkSelection(),this.showToolbarActions(),t.value=""},bindWindowActions:function(){var t,e=this;return this.windowResizeHandler=function(){clearTimeout(t),t=setTimeout(function(){e.toolbar&&e.toolbar.classList.contains("medium-editor-toolbar-active")&&e.setToolbarPosition()},100)},this.on(this.options.contentWindow,"resize",this.windowResizeHandler),this},activate:function(){this.isActive||this.setup()},deactivate:function(){var t;if(this.isActive){for(this.isActive=!1,void 0!==this.toolbar&&(this.options.elementsContainer.removeChild(this.anchorPreview),this.options.elementsContainer.removeChild(this.toolbar),delete this.toolbar,delete this.anchorPreview),t=0;t<this.elements.length;t+=1)this.elements[t].removeAttribute("contentEditable"),this.elements[t].removeAttribute("data-medium-element");this.removeAllEvents()}},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindPaste:function(){var t,e=this;for(this.pasteWrapper=function(t){var n,r,i="";if(this.classList.remove("medium-editor-placeholder"),!e.options.forcePlainText&&!e.options.cleanPastedHTML)return this;if(t.clipboardData&&t.clipboardData.getData&&!t.defaultPrevented){if(t.preventDefault(),e.options.cleanPastedHTML&&t.clipboardData.getData("text/html"))return e.cleanPaste(t.clipboardData.getData("text/html"));if(e.options.disableReturn||this.getAttribute("data-disable-return"))i=e.htmlEntities(t.clipboardData.getData("text/plain")),e.options.ownerDocument.execCommand("insertHTML",!1,i);else{for(n=t.clipboardData.getData("text/plain").split(/[\r\n]/g),r=0;r<n.length;r+=1)""!==n[r]&&(i+=navigator.userAgent.match(/firefox/i)&&0===r?e.htmlEntities(n[r]):"<p>"+e.htmlEntities(n[r])+"</p>");e.options.ownerDocument.execCommand("insertHTML",!1,i)}}},t=0;t<this.elements.length;t+=1)this.on(this.elements[t],"paste",this.pasteWrapper);return this},setPlaceholders:function(){var t,e=function(t){t.querySelector("img")||t.querySelector("blockquote")||""!==t.textContent.replace(/^\s+|\s+$/g,"")||t.classList.add("medium-editor-placeholder")},n=function(t){this.classList.remove("medium-editor-placeholder"),"keypress"!==t.type&&e(this)};for(t=0;t<this.elements.length;t+=1)e(this.elements[t]),this.on(this.elements[t],"blur",n),this.on(this.elements[t],"keypress",n);return this},cleanPaste:function(t){var e,n,r,i=this.getSelectionElement(),o=/<p|<br|<div/.test(t),s=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;||)([^&]+)(&quot;|&rdquo;|&ldquo;||)&gt;/gi),'<a href="$2">']];for(e=0;e<s.length;e+=1)t=t.replace(s[e][0],s[e][1]);if(o)for(n=t.split("<br><br>"),this.pasteHTML("<p>"+n.join("</p><p>")+"</p>"),this.options.ownerDocument.execCommand("insertText",!1,"\n"),n=i.querySelectorAll("a,p,div,br"),e=0;e<n.length;e+=1)switch(r=n[e],r.tagName.toLowerCase()){case"a":this.options.targetBlank&&this.setTargetBlank(r);break;case"p":case"div":this.filterCommonBlocks(r);break;case"br":this.filterLineBreak(r)}else this.pasteHTML(t)},pasteHTML:function(t){var e,n,r,i,o=this.options.ownerDocument.createDocumentFragment();for(o.appendChild(this.options.ownerDocument.createElement("body")),i=o.querySelector("body"),i.innerHTML=t,this.cleanupSpans(i),e=i.querySelectorAll("*"),r=0;r<e.length;r+=1)n=e[r],n.removeAttribute("class"),n.removeAttribute("style"),n.removeAttribute("dir"),"meta"===n.tagName.toLowerCase()&&n.parentNode.removeChild(n);this.options.ownerDocument.execCommand("insertHTML",!1,i.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.tagName.toLowerCase()||"div"===t.tagName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.innerText)&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?t.parentNode.removeChild(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?1===t.parentNode.childElementCount&&this.removeWithParent(t):t.parentNode.removeChild(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t.parentNode))},cleanupSpans:function(t){var e,n,r,i=t.querySelectorAll(".replace-with");for(e=0;e<i.length;e+=1)n=i[e],r=this.options.ownerDocument.createElement(n.classList.contains("bold")?"b":"i"),r.innerHTML=n.classList.contains("bold")&&n.classList.contains("italic")?"<i>"+n.innerHTML+"</i>":n.innerHTML,n.parentNode.replaceChild(r,n);for(i=t.querySelectorAll("span"),e=0;e<i.length;e+=1)n=i[e],/^\s*$/.test()?n.parentNode.removeChild(n):n.parentNode.replaceChild(this.options.ownerDocument.createTextNode(n.innerText),n)}}}(window,document)},function(t,e,n){var r=n(16),i=n(18),o=n(1),s=o.PropTypes,a=o.createClass({displayName:"Editor",propTypes:{src:s.string,onChange:s.func.isRequired},render:function(){var t=this.props,e=t.video_id;return o.createElement("div",{className:"col-youtube"},o.createElement(i,{video_id:e}),o.createElement("fieldset",{className:"col-youtube-fieldset"},o.createElement(r,{label:"YouTube Video ID",value:e,name:"youtube_video_id",onChange:this._onChange})))},_onChange:function(t){this.props.onChange({video_id:t.currentTarget.value})}});t.exports=a},function(t,e,n){var r=n(42),i=n(44),o=n(1);n(69);var s={defaultContent:function(){return{video_id:""}},renderEditor:function(){return o.createElement(r,o.__spread({onChange:this.setContent},this.state.content))},renderPreviewer:function(){return o.createElement(i,o.__spread({},this.state.content))}};t.exports=s},function(t,e,n){var r=n(1),i=n(18),o=r.createClass({displayName:"Previewer",render:function(){return r.createElement("div",{className:"col-youtube"},r.createElement(i,{src:this.props.src}))}});t.exports=o},function(t,e,n){var r=n(25),i=n(2),o={create:function(t){var e=r.BLOCK_TYPE_CREATE;i.dispatch({type:e,params:t})}};t.exports=o},function(t,e,n){t.exports={Medium:n(39),Image:n(36),YouTube:n(43)}},function(t,e,n){var r=n(11),i=n(12),o=n(7),s=n(1),a=s.PropTypes,u=s.createClass({displayName:"AddBlock",propTypes:{parentBlockListId:a.number.isRequired,position:a.number,type:a.string.isRequired},getInitialState:function(){return r.find(this.props.type)},render:function(){var t=this.state,e=t.icon,n=t.id,r=t.label;return s.createElement(i,{"aria-label":r,className:"col-btn-icon",onClick:this._onClick},s.createElement("img",{src:e,alt:n,"aria-hidden":"true"}))},_onClick:function(t){var e=this.props,n=e.parentBlockListId,r=e.type,i=e.position;o.create({parentBlockListId:n,position:i,type:r}),t.preventDefault()}});t.exports=u},function(t,e,n){var r=n(3),i=n(20),o=n(62),s=n(50),a=n(53),u=n(10),c=n(1),l=c.PropTypes,h=c.createClass({displayName:"App",mixins:[u],propTypes:{editorId:l.number.isRequired},getState:function(){return{blockList:r.findByEditorId(this.props.editorId),editor:o.find(this.props.editorId)}},render:function(){var t=this.state,e=t.blockList,n=t.editor;return c.createElement("div",{className:"colonel"},c.createElement(a,{mode:n.mode,onChange:this._onModeChange}),c.createElement(s,{editor:n,initialBlockListId:e.id}))},_onModeChange:function(t){i.update(this.props.editorId,{mode:t})}});t.exports=h},function(t,e,n){var r=n(47),i=n(11),o=n(10),s=n(1),a=s.createClass({displayName:"BlockMenu",mixins:[o],propTypes:{editor:s.PropTypes.any.isRequired},getDefaultProps:function(){return{position:0}},getState:function(){var t=this.props,e=t.block,n=t.editor;return{types:e?i.find(e.type).types:n.types}},getButton:function(t){var e=this.props,n=e.parentBlockListId,i=e.position;return s.createElement(r,{key:t,type:t,parentBlockListId:n,position:i})},getNavigation:function(){return s.createElement("nav",{className:"col-menu",role:"navigation"},this.state.types.map(this.getButton))},render:function(){return this.state.types?this.getNavigation():null}});t.exports=a},function(t,e,n){var r=n(1),i=n(5),o={};o[i.EDIT_MODE]=n(51),o[i.PREVIEW_MODE]=n(54);var s=r.createClass({displayName:"ContentSection",propTypes:{editor:r.PropTypes.any.isRequired,initialBlockListId:r.PropTypes.number.isRequired},render:function(){var t=this.props.editor,e=o[t.mode];return r.createElement("div",{className:"col-content"},r.createElement(e,{editor:t,initialBlockListId:this.props.initialBlockListId}))}});t.exports=s},function(t,e,n){var r=n(1),i=n(22),o=r.createClass({displayName:"Editor",render:function(){var t=this.props,e=t.editor,n=t.initialBlockListId;return r.createElement(i,{editor:e,initialBlockListId:n})}});t.exports=o},function(t,e,n){var r=n(21),i=n(19),o=n(65),s=n(28),a=n(5),u=n(1),c=n(56),l=u.createClass({displayName:"EditorBlock",mixins:[s],listComponent:function(){return n(22)},render:function(){var t=this.state.block,e=t.id,n=t.parentBlockListId;return u.createElement(o,{className:"col-block",message:e,onDrop:this._onDrop},u.createElement(r,{block:this.state.block,mode:a.EDIT_MODE}),u.createElement("div",{className:"col-toolbar"},u.createElement(c,{blockId:e,parentBlockListId:n})),this.childBlockListComponent())},_onDrop:function(t,e){i.move(this.state.block.parentBlockListId,t,e)}});t.exports=l},function(t,e,n){var r=n(1),i=n(12),o=n(5),s=r.createClass({displayName:"ModeSelection",propType:{mode:r.PropTypes.oneOf(Object.keys(o)),modes:r.PropTypes.object,onChange:r.PropTypes.func.isRequired},getDefaultProps:function(){return{mode:o.EDIT_MODE,modes:{Edit:o.EDIT_MODE,Preview:o.PREVIEW_MODE}}},getTab:function(t){var e=this.props,n=e.mode,o=e.modes,s=(e.setMode,{className:"col-tabs-btn",disabled:n===o[t],onClick:function(e){return this._onModeClick(e,o[t])}.bind(this)});return r.createElement("li",{key:t,className:"col-tabs-list-item",role:"tab"},r.createElement(i,r.__spread({},s),t))},getTabs:function(){return Object.keys(this.props.modes).map(this.getTab)},render:function(){return r.createElement("nav",{role:"navigation",className:"col-tabs"},r.createElement("ul",{className:"col-tabs-list",role:"tablist"},this.getTabs()))},_onModeClick:function(t,e){t.preventDefault(),this.props.onChange(e)}});t.exports=s},function(t,e,n){var r=n(1),i=n(23),o=r.createClass({displayName:"Previewer",render:function(){return r.createElement(i,{initialBlockListId:this.props.initialBlockListId})}});t.exports=o},function(t,e,n){var r=n(21),i=n(28),o=n(5),s=n(1),a=s.createClass({displayName:"PreviewerBlock",mixins:[i],listComponent:function(){return n(23)},render:function(){return s.createElement("div",null,s.createElement(r,{block:this.state.block,mode:o.PREVIEW_MODE}),this.childBlockListComponent())}});t.exports=a},function(t,e,n){var r=n(7),i=n(12),o=n(1),s=n(57),a=o.PropTypes,u=o.createClass({displayName:"RemoveBlock",propTypes:{blockId:a.number.isRequired,parentBlockListId:a.number.isRequired},render:function(){return o.createElement(i,{"aria-label":s.remove.label,className:"col-btn-remove",onClick:this._onClick},"")},_onClick:function(t){var e=confirm(s.remove.confirm),n=this.props,i=n.blockId,o=n.parentBlockListId;t.preventDefault(),e&&r.destroy({blockId:i,parentBlockListId:o})}});t.exports=u},function(t){t.exports={remove:{label:"Remove this block",confirm:"Are you sure you want to remove this block?"},add:{label:"Add a new block"}}},function(t,e,n){var r=(n(1),n(5)),i=(n(6),{getInitialState:function(){return{content:this.props.initialContent||this.defaultContent()}},setContent:function(t){this.setState({content:Object.assign({},this.state.content,t)},function(){this.props.updateContent(this.state.content)})},editMode:function(){return this.props.mode===r.EDIT_MODE},render:function(){return this.editMode()?this.renderEditor():this.renderPreviewer()}});t.exports=i},function(t,e,n){"use strict";var r=n(66),i={shouldComponentUpdate:function(t,e){return!r(this.props,t)||!r(this.state,e)}};t.exports=i},function(t,e,n){function r(t){"use strict";this.content=t.content||null,this.id=i(),this.parentBlockListId=t.parentBlockListId,this.type=t.type||"text"}{var i=n(15);n(3)}r.prototype.toJSON=function(){"use strict";var t=n(3),e=t.findByBlockId(this.id);return{blocks:e?e.toJSON():[],content:this.content,type:this.type}},t.exports=r},function(t,e,n){function r(t){"use strict";this.editorId=t.editorId,this.blockId=t.blockId,this.id=i(),this.$BlockList_blocks=[]}var i=n(15);r.prototype.all=function(){"use strict";return this.$BlockList_blocks},r.prototype.has=function(t){"use strict";return this.indexOf(t)>-1},r.prototype.indexOf=function(t){"use strict";return this.$BlockList_blocks.indexOf(t)},r.prototype.removeBlock=function(t){"use strict";this.$BlockList_blocks=this.$BlockList_blocks.filter(function(e){return e!==t})},r.prototype.insertBlock=function(t,e){"use strict";this.$BlockList_blocks.splice(e,0,t)},r.prototype.move=function(t,e){"use strict";var n=this.indexOf(t),r=this.indexOf(e);this.$BlockList_blocks.splice(r,0,this.$BlockList_blocks.splice(n,1)[0])},r.prototype.toJSON=function(){"use strict";var t=n(14);return this.all().map(t.find).filter(Boolean).map(function(t){return t.toJSON()})},t.exports=r},function(t,e,n){var r=n(11),i=n(8),o=n(26),s=n(2),a=n(4),u=n(5),c=n(6),l=a.List(),h=function(){return{mode:u.EDIT_MODE,types:r.keys()}},f={find:function(t){return l.find(function(e){return e.id===t})||null},_create:function(t){var e=Object.assign({},h(),t);c(u[e.mode],"Unacceptable mode for editor: "+e.mode),c(null===f.find(e.id),"Editors must have a unique identifier"),l=l.push(e),i.publish()},_update:function(t,e){var n=f.find(t),r=l.indexOf(n);c(r>=0,"Unable to find editor with an id of "+t),l=l.set(r,Object.assign({},h(),n,e)),i.publish()},dispatchToken:s.register(function(t){switch(t.type){case o.EDITOR_CREATE:f._create(t.params);break;case o.EDITOR_UPDATE:f._update(t.id,t.params)}})};t.exports=f},function(t,e,n){var r=n(45),i=n(29),o=n(1);t.exports=function(t){var e=t.component;o.isValidElement(e)===!1&&(e=i(e)),r.create(Object.assign({},t,{component:e}))}},function(t,e,n){var r=n(7),i=n(3);t.exports=function o(t,e){e.forEach(function(e,n){r.create(Object.assign({position:n,parentBlockListId:t},e)),Array.isArray(e.blocks)&&o(i.last().id,e.blocks)})}},function(t,e,n){!function(e,r){t.exports=r(n(1))}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([/*!**********************!*\
	  !*** ./src/index.js ***!
	  \**********************/
function(t,e,n){var r=n(/*! react */1),i=r.PropTypes,o=n(/*! ./utils/classSet */2),s=r.createClass({displayName:"Draggable",propTypes:{onDrop:i.func.isRequired,message:i.any.isRequired},getDefaultProps:function(){return{dropEffect:"copy",effectAllowed:"all"}},getInitialState:function(){return{dragging:!1,droppable:!1}},render:function(){var t=o(this.props.className,o({dragon:!0,"dragon-dragging":this.state.dragging,"dragon-droppable":this.state.droppable}));return r.createElement("div",{className:t,onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDrop:this._onDrop,onDragStart:this._onDragStart,onDragEnd:this._onDragEnd,draggable:!0},r.createElement("div",{className:"dragon-children"},this.props.children))},_onDragStart:function(t){var e=this.props,n=e.message,r=e.dropEffect,i=e.effectAllowed;t.dataTransfer.setData("text/plain",JSON.stringify(n)),t.dataTransfer.dropEffect=r,t.dataTransfer.effectAllowed=i,this.setState({dragging:!0})},_onDragEnd:function(t){t.preventDefault(),this.setState({droppable:!1,dragging:!1})},_onDragOver:function(t){t.preventDefault(),this.setState({droppable:!0})},_onDragLeave:function(t){t.preventDefault(),this.setState({droppable:!1})},_onDrop:function(t){t.preventDefault();var e=JSON.parse(t.dataTransfer.getData("text/plain")),n=this.props.message;this.props.onDrop(e,n),this.setState({droppable:!1,dragging:!1})}});t.exports=s},/*!************************!*\
	  !*** external "react" ***!
	  \************************/
function(e){e.exports=t},/*!*******************************!*\
	  !*** ./src/utils/classSet.js ***!
	  \*******************************/
function(t){function e(t){return"object"==typeof t?Object.keys(t).filter(function(e){return t[e]}).join(" "):Array.prototype.join.call(arguments," ")}t.exports=e}])})},function(t){"use strict";function e(t,e){if(t===e)return!0;var n;for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}t.exports=e},function(){},function(){},function(){},function(){},function(t){t.exports=require("react/addons")}]);
//# sourceMappingURL=colonel-kurtz.js.map